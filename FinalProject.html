<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>FinalProject.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>FinalProject</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/index-vG-gdKWq.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/preload-helper-DImqtvgl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/chunk-DZLz74EQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/react-BcIddLXZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/compiler-runtime-Cr9loedd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/jsx-runtime-mwDPpfh_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useEventListener-D1FLsfmf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/react-dom-D6bRRS5R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/Combination-DWHMUa0d.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cn-DEUt_IsG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/menu-items-Dm8s6sMr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/hotkeys-ClCtr3_I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/button-Zjtz1syG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-1ZdxNBaX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/createLucideIcon-CaU6_Jtx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/check-Dc7YCRim.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/select-Di-JjADd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/multi-map-COQ6MvP7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/chevron-right-BExEgq1M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dropdown-menu-ChUikXiI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/tooltip-CerBk_un.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_Uint8Array-D5Z9rM2X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_getTag-CVRrQL_Q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_baseIsEqual-CVFfFJm2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/jotai-BTnrNcC1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/invariant-D5a0EE05.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/isArrayLikeObject-DKyJYtr8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/merge-Dvc5opZF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/zod-U2NFpcFA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/utils-BpjB6B-Y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/requests-DD3OWR81.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/once-3GsqimLM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/toDate-CnvLb18a.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_baseSlice-BWZ0PeaJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_arrayMap-DQI2GUNb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/isSymbol-xTSywenE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/toString-CBnct2wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_hasUnicode-3DIK_jNi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/upperFirst-CBQfDRod.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/capitalize-CBqvgOfA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ai-model-dropdown-CCxgO0mJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/badge-CxcKOiwY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/use-toast-BPMVOfO3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/constants-CEISdYm1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/Deferred-Mppm0cvJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/config-e9OVB2bJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/uuid-4lb_EYpq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/key-BOd4SjWu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/connection-CsVOmbVi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useLifecycle-CxNbfWnk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useNonce-CL3DrH5R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/capabilities-CEL4hxAo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/createReducer-C6dJ71nW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-o3-gJN-A.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-DdXBxU_X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-Dv7WCK3M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-w3K5vvwl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-DXPWGCwf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-BOJjflZo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-ws1ADWL0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-BGbJQ9FV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-dCpey1ug.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/stex-w1KpyykF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_baseProperty-c4IQJQis.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/toNumber-CTOPJrpu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/now-BXqTLlmI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/debounce-BUM2losY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/toInteger-Bor4StOs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/type-DVCC-93H.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/marked.esm-BB_RKOA5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/main-CCaZmKLi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cells-DV6dfoCq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/kbd-BfBY_QKr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/renderShortcut-a-3t8sis.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useEvent-itkPNnCe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useDeleteCell-Ba4wqcnv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/lazy-ijSQmhmN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/defaultLocale-DEWTIUVh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/precisionRound-BLxyDkD7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/defaultLocale-B9-NA0ur.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/vega-loader.browser-Cp1bHVeU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/tooltip-Yli91_uW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ErrorBoundary-5_63wxX3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/alert-dialog-BZHeDuaE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dialog-CzmSXArA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useDebounce--Sw2WRQ5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/numbers-Dft9TKC1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/SSRProvider-CMB_HLxO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/context-BqH7Jigl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useNumberFormatter-BPGR7t2W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/usePress-C2JVmCUi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/input-DuVApvWu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ImperativeModal-ExH1h9et.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cell-link-Bp_0p3CR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/alert-B5fh2kMN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/links-90C38wV6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/state-BHcVA2dC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/MarimoErrorOutput-ZIgqDBQe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/spinner-1oeuzoUk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_arrayReduce-DV4IVFuG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/startCase-RfubwhHM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/strings-DRRWXNT2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/command-DhuV6_de.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/popover-BoRNi4dY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useRunCells-WnlQjiPG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/copy-SPzF4B1M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/copy-CDDalEhv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/copy-icon-Ckew1l1_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mode-BK9SOQXS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/purify.es-CmG1k0Cr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/RenderHTML-BBVeCFEd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/table-Bj1zHGNd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/tabs-CGHt3Blh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useAsyncData-BPaRR7vx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useIframeCapabilities-BLQ5-OdI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/error-banner-rdjPobI5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/formats-Cit8Tr_y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useTheme-CJkb1R7C.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/en-US-Bxm1PGFP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/isValid-CFczudfT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/maps-cpHLsM9S.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/shim-FF_l0CN4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/download-DrI1Gw05.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/extends-DhnjMUSs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/emotion-is-prop-valid.esm-CjexKXdD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useDateFormatter-CQ9jB95h.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/range-ZclXTdAh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/table-CmDieCGZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/Output-BNpy6qAs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/name-cell-input-VEOAxqMs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useHotkey-Ca6pS8sJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/objectWithoutPropertiesLoose-CNyONSoo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/esm-C1NahKuy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-bbz7Slba.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-Duhp104c.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-CH5tSYom.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-Zii08NWl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-C27NmZjJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-DWvYBldG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-B309G_89.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-5c-fdIcP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-COzB_eCZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-BMfw4eeq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-Z76N9TEr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-C3eCrV3K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-3nYEuz31.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/apl-DOdxvsp7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/asciiarmor-iHsvYBsh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/asn1-CjQdFpKC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/brainfuck-DtaPUQOb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/clike-CEj-3lIu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/clojure-BoRNIjWi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cmake-BDPy65SJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cobol-B1NZRKFh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/coffeescript-C6u-3CUG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/commonlisp-PnS0RzOo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/crystal-CmwgoX1x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/css-BOMeM4Jz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cypher-BNcNWKra.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/d-BMO4C4Kr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/diff-pLFk18zx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dtd-Cufzm3tN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dylan-CohSy5uK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ecl-BhEt80nJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/eiffel-CKJVLfM7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/elm-ClkLCCoU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/erlang-D2TH4-Et.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/simple-mode-CXCwEnyS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/factor-6NmCZvh-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/forth-DV7ZwZS0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/fortran-C9_PuY2l.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/gas-CGuyKmgF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/gherkin-BwmPTL6e.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/groovy-DJxiqoVo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/haskell-DOcPZqkO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/haxe-BVSsVSdX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/idl-D5drHePd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/javascript-rI4fd75W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/jinja2-BrZGqXAx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/julia-z0xq3uqV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/livescript-BbVvVfSY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/lua-CtEmKXsU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mathematica-B-SjlQIm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mbox-BdnWvTJv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mirc-Cyycx3am.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mllike-ZkoLEmrh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/modelica-DIZcE54y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mscgen-MISBZbzR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/mumps-Cnu1tNUa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/nsis-CUebodQn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ntriples-2rre165b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/octave-C7u5CeUZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/oz-D5aE2uST.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/pascal-DTApZM3o.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/perl-Ckgh9LJK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/pig-jAl9a1Kh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/powershell-C_IKzlOl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/properties-BdVxDpDJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/protobuf-DLu_SUI6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/pug-fgP-dIQ4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/puppet-CShRizHW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/python-ChTwa-ru.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/q-D2OTJZH4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/r-DRqIAgj1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/rpm-BStFD27m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ruby-C37hkPS4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/sas-CCEIl8BG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/scheme-B0jflgrk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/shell-Cq7B0hFW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/sieve-DS0lS4kt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/smalltalk-HHM53Uii.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/sparql-BMqtnWzI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/stylus-Br2gMpMI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/swift-BJ8qi_zI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/tcl-D0knbOX7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/textile-DrRQSuh3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/toml-C2kDGfZi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/troff-2dFxqWQa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ttcn-cfg-CBXajWEo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ttcn-Cj4sIofh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/turtle-CDdPtp5F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/vb-CtEhAMYU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/vbscript-B0nzdgzL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/velocity-DR7TSall.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/verilog-MmKxT9bW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/vhdl-0jJrpQNA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/webidl-D9f20BkN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/xquery-B0eSGN9q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/yacas-BS613OH9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/z80-CJYC52xh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/esm-DXHMyc8g.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/trash-DpmcvlCC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ConsoleOutput-CcWTsPJI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/icons-HGhpVPVr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/add-missing-import-pmcK06GU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/blob-B96v6VlX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/add-cell-with-ai-DF_F9Sqz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/chart-no-axes-column-C2nGNVra.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/square-function-DncO0xCM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/spec-Cdxt7KQF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/focus--Piy3rX5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useInstallPackage-B1IBfLxp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/column-preview-BavQbx6K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useAddCell-Ig4Te4YX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/toggle-CPnmDQd7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/api-qc-D7yz9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/globals-Bcw0dX52.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/share-Bur20myQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/dist-I8SxGjN9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/memoize-DhF8x4Aa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_toKey-16owuO_q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_baseSet-L2qemYhz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/utilities.esm-SfrtJjbv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/floating-outline-CgxonLQ-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/eye-off-BIDUS-iw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/plus-DWAWtOBJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/readonly-python-code-ChK3PfU6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/file-video-camera-gcIrLbdD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/file-text-Z92DzmMA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/file-Cesos4Qp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/types--mPsPGF4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/label-FIGQlkj5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/form-Cdn744fY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/textarea-DA_SbCD5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/circle-x-Bb-EcEyG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/refresh-ccw-ETV_gv20.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/trash-2-D1jEfGpj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/form-q5HZfP0M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/field-mNGJv_67.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/switch-p-zRh0zu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useBoolean-CG31RE8p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/useDeepCompareMemoize-DkEGS3Wg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/LazyAnyLanguageCodeMirror-De4wCXx1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/types-B_LGU134.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/prop-types-BAY7nW8B.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/es-CM14OBji.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/VisuallyHidden-B9I0t9He.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_baseFlatten-ViL-mfkw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/get-BUGWIXZE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/hasIn-BgJKauE7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/_basePickBy-CSDa7ReR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/pick-BQzWKfma.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/square-B9bfYM_2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/download-kgdScOCd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/globe-BGR7PZfb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/send-C0pANzAH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/refresh-cw-DKt4M-wV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/settings-DvMaGwYY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/bundle.esm-Bah18HX6.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/cells-BvrC6Bsv.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/Output-j3zW187k.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/ConsoleOutput-BFFTcC5Y.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.6/dist/assets/index-BmcO-QYJ.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "FinalProject.py",
            "mode": "read",
            "version": "0.17.6",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": false, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "medium"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "from __future__ import annotations\nimport marimo as mo\nimport networkx as nx\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport requests, zipfile, io\nimport geopandas as gpd\nimport requests\nimport argparse\nimport csv\nimport json\nimport os\nimport re\nimport sys\nfrom typing import Dict, List, Optional, Tuple\nimport pickle\nimport numpy as np\nfrom sklearn.neighbors import BallTree\nfrom pyvis.network import Network\nfrom ortools.constraint_solver import pywrapcp, routing_enums_pb2\nimport folium\nfrom pathlib import Path", "code_hash": "91a6cb715ca6937892790857b53f0208", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hbol", "name": "_"}, {"code": "mo.md(r\"\"\"\nTo see the whole repository that made this notebook possible checkout:\n\nhttps://github.com/TaylorBoan/Cancer-Traveling-Salesman.git\n\"\"\")", "code_hash": "d177cd38a1e945a3df2b6d197d4d2c1e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"\n# Bio 362 Final Project\n## Taylor Rubalcava\n\"\"\")", "code_hash": "6818bbb79b02240f18a35798d4036789", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "vblA", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Cancer diagnosis and treatment are anything but trivial, requiring highly specialized equipment that many smaller hospitals simply don\u2019t have on-site. This creates a serious problem for rural and less densely populated areas, where access to advanced imaging and diagnostic services is limited. Early detection of cancer is of paramount importance, yet many patients in these regions face long travel times, delayed screenings, and a reduced likelihood of receiving timely care.\n\n### One solution used today is mobile cancer screening units, specialized vehicles equipped with mammography, ultrasound, CT, or lab capabilities that travel directly to underserved communities. These units bridge the geographic gap by bringing essential diagnostic technologies to patients instead of requiring patients to travel long distances to large medical centers.\n\"\"\")", "code_hash": "4b93b389a173a4e6de6c3e13027378ee", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "bkHC", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Designing an effective route for these mobile screening units is far from straightforward. Rural populations are not only sparse\u2014they are often geographically fragmented, separated by long distances and wide variations of local need and demand. An optimal route must balance clinical need, population density, travel time, and operational constraints of the mobile unit itself.\n\n### Routing therefore becomes a logistics problem as much as a healthcare problem. How can we design a route that maximizes the number of at-risk individuals reached, minimizes idle travel, and ensures predictable, recurring access for communities that need it most?\n\"\"\")", "code_hash": "8959af06e15b3488d0a7dbe88776e214", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "lEQa", "name": "_"}, {"code": "mo.md(r\"\"\"\n###Here we will explore how an optimal route can be calculated using available open-source software and data. To simplify our calculations we will make several assumptions:\n\n1. We will only consder populations and hospitals found in Utah\n2. We will calculate the optimal route for a mobile unit only serving Utah residents\n3. We will only consder the need for lung cancer screening and the neccesary Low-Dose-CT machine needed. (LDCT)\n\n###These assumptions will make our computational requirements more manageable while making it easy to expand our calculations after a proof of concept.\n\nWe are focusing on Utah because that is where I live. We are focusing on lung cancer screening because not only is it one of the most deadly and common types of cancer but it is also the most difficult to screen for. Mobile LDCT buses/trailers (and LDCT machines themsevles) exist but they are rare, expensive, and as such the most in need of an optimal route.\n\"\"\")", "code_hash": "a02fc373b23dcee03fe684757f4fe7b6", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "PKri", "name": "_"}, {"code": "mo.md(r\"\"\"\n### The most obvious model is an undirected graph with weighted nodes and edges. Each node will represent a populated area and each edge represents travel paths between cities. Each node's weight will be determined by it's population and access to local cancer screening facilities. Each edge's weight will be the time required to travel between those two cities. Once we have built our graph we can use it to solve our weighted traveling salesman problem (WTSP).\n\n### In summary we need:\n1. Nodes (Locations we _could_ visit)\n2. Nodes' weights (How much those places are in need of mobile screening)\n3. Edges (Paths between locations)\n4. Edges' weights (How long it takes to get between locations, a fair approximation of cost)\n\"\"\")", "code_hash": "702fd42add149e12e78af3ac9d00e033", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Xref", "name": "_"}, {"code": "mo.md(r\"\"\"\n### The first thing we need are the nodes, or possible locations. ZIP Code Tabulation Areas (ZCTAs) are widely used in healthcare access modeling and so that is what we will use here. Each ZCTA in Utah will be a possible node.\n\nI was able to find this 2023 data containing a lat and lon point for each zip code in the United States:\n\nhttps://www2.census.gov/geo/docs/maps-data/data/gazetteer/2023_Gazetteer/2023_Gaz_zcta_national.zip\n\nHere it is,  as well as the interpretations for each column:\nGEOID = Zip Code (Revelant to us)\nALAND = Area Land\nAWATER = Area Water\nALAND_SQMI = Area Land by Square Mile\nAWATER_SQMI = Area Water by Square Mile\nINTPTLAT = Internal Point Latitude\nINTPTLONG = Internal Point Longitude\n\"\"\")", "code_hash": "4f334c63aecb500648b2c0500465a934", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "SFPL", "name": "_"}, {"code": "zcta_nation = pd.read_csv(\"./zcta_national.txt\")\nzcta_nation.head(10)", "code_hash": "102c5e3eed43ac47feeb2a676faff0b5", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BYtC", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Nodes \u2705\n### I also found this census data that has the population for each zip code\nhttps://api.census.gov/data/2023/acs/acs5?get=NAME,B01003_001E\u0026for=zip%20code%20tabulation%20area:*\n### We will eventually need this for our node weights calculation.\n### Unfortunately, neither of these links lead to clean .csv data. The script that read, cleaned, and merged these two pieces of data is found in build_utah_zctas.py. This resulted in this csv file:\n\"\"\")", "code_hash": "f002540ee5d3aebcb895bd404ffb7df5", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "RGSE", "name": "_"}, {"code": "merged_zcta = pd.read_csv(\"./zcta_merged.csv\")\nmerged_zcta.head(10)", "code_hash": "2c24cf91d5c2d8b1a694643641f734f9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Kclp", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Which I then manually filtered and cleaned to Utah only Zip Codes/GEOIDs while inspecting it in Numbers:\n\"\"\")", "code_hash": "6e14c3c8afb5f119081815e997d16d65", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "emfo", "name": "_"}, {"code": "utah_zcta = pd.read_csv(\"./utah_zctas.csv\")\nutah_zcta.head(10)\nprint(len(utah_zcta))", "code_hash": "f6dafefbdace24e08ad3edf96b82d3ec", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Now we have the nodes and their populations. This is enough to begin building the graph.\n\n### We could simply connect every node to every other node, but that would be an inefficient N^2 graph with ~88k edges. Ideally, we only connect nodes/zip codes to their neighboring nodes/zipcodes. We will use the K-Nearest Neighbors (KNN) algorithm to determine edge locations.\n\n### We also need to determine the weights for those edges. The weight for any given edge is how long it takes to drive between the two nodes/zip codes that edge connects. Unfortunately the Google Maps API is paid and requires API Keys. Instead I will use Open Street Maps and Open Street Maps and Open Source Routing Machine. OSM and OSRM respectively. To do this I had to download the OSM data for Utah and set up a local OSMR server.\n\n### In summary we will use:\n1. Sklearn to find each nodes k nearest neighbors / edges\n2. OSMR to get the travel time/weights for each of those edges\n3. NetworkX to create the graph including the nodes, edges, and edge weights\n\nNote, that in order for the following code to work the OSMR server must be running on port 5001\nThese are the commands that I used to download the neccesary OSM data and start the OSMR server:\n\n* For more detailsa about how to setup this server locally see the bottom of this notebook\n\"\"\")", "code_hash": "ae4ed9e829d93fa8b7eec13dfa6a4ffb", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nWHF", "name": "_"}, {"code": "OSRM_BASE = \"http://localhost:5001\"\n\nINPUT_CSV = \"utah_zctas.csv\"\nOUTPUT_EDGES_CSV = \"utah_edges.csv\"\nOUTPUT_GRAPH_PKL = \"utah_graph.gpickle\"\nK_NEIGHBORS = 6  # neighbors per node\n\n\ndef load_zctas(path: str) -\u003E pd.DataFrame:\n    df = pd.read_csv(path)\n\n    cols = {c.lower(): c for c in df.columns}\n\n    # Handle both original and cleaned forms\n    if \"geoid\" in cols:\n        df.rename(columns={cols[\"geoid\"]: \"zcta\"}, inplace=True)\n    elif \"zcta\" not in df.columns:\n        raise ValueError(\"Could not find GEOID or zcta column in CSV\")\n\n    if \"intptlat\" in cols:\n        df.rename(columns={cols[\"intptlat\"]: \"lat\"}, inplace=True)\n    if \"intptlong\" in cols:\n        df.rename(columns={cols[\"intptlong\"]: \"lon\"}, inplace=True)\n\n    # Ensure required columns\n    for col in [\"zcta\", \"lat\", \"lon\", \"population\"]:\n        if col not in df.columns:\n            raise ValueError(f\"Missing required column: {col}\")\n\n    # Keep only Utah ZCTAs (84xxx)\n    df[\"zcta\"] = df[\"zcta\"].astype(str)\n    df = df[df[\"zcta\"].str.startswith(\"84\")].copy()\n\n    df[\"lat\"] = df[\"lat\"].astype(float)\n    df[\"lon\"] = df[\"lon\"].astype(float)\n    df[\"population\"] = (\n        pd.to_numeric(df[\"population\"], errors=\"coerce\").fillna(0).astype(int)\n    )\n\n    df = df.reset_index(drop=True)\n    return df\n\n\ndef build_knn_edges(df: pd.DataFrame, k: int) -\u003E list[tuple[int, int]]:\n    \"\"\"Return list of undirected edges as index pairs (i, j).\"\"\"\n    coords = np.radians(df[[\"lat\", \"lon\"]].values)  # expects radians\n    tree = BallTree(coords, metric=\"haversine\")\n\n    # +1 because the nearest neighbor is itself\n    distances, indices = tree.query(coords, k=k + 1)\n\n    edge_set = set()\n\n    n = len(df)\n    for i in range(n):\n        for j_idx in indices[i][1:]:  # skip itself\n            j = int(j_idx)\n            u, v = sorted((i, j))\n            edge_set.add((u, v))\n\n    edges = list(edge_set)\n    print(f\"KNN created {len(edges)} unique edges for {n} nodes\")\n    return edges\n\n\ndef osrm_travel_time_minutes(lat1, lon1, lat2, lon2) -\u003E float:\n    \"\"\"Get driving time in minutes via OSRM.\"\"\"\n    url = f\"{OSRM_BASE}/route/v1/driving/{lon1},{lat1};{lon2},{lat2}?overview=false\"\n    r = requests.get(url)\n    r.raise_for_status()\n    data = r.json()\n\n    if data.get(\"code\") != \"Ok\":\n        raise RuntimeError(f\"OSRM error: {data}\")\n\n    secs = data[\"routes\"][0][\"duration\"]\n    return secs / 60.0\n\n\ndef build_graph(df: pd.DataFrame, edges_idx: list[tuple[int, int]]) -\u003E nx.Graph:\n    G = nx.Graph()\n\n    # Add nodes with attributes\n    for i, row in df.iterrows():\n        G.add_node(\n            row[\"zcta\"],\n            lat=row[\"lat\"],\n            lon=row[\"lon\"],\n            population=int(row[\"population\"]),\n        )\n\n    # Add edges with travel_time_min\n    edge_rows = []\n    for count, (i, j) in enumerate(edges_idx, start=1):\n        a = df.iloc[i]\n        b = df.iloc[j]\n\n        try:\n            t_min = osrm_travel_time_minutes(a[\"lat\"], a[\"lon\"], b[\"lat\"], b[\"lon\"])\n        except Exception as e:\n            print(f\"OSRM failed for {a['zcta']} \u2013 {b['zcta']}: {e}\")\n            continue\n\n        G.add_edge(a[\"zcta\"], b[\"zcta\"], travel_time_min=t_min)\n\n        edge_rows.append(\n            {\n                \"zcta_u\": a[\"zcta\"],\n                \"zcta_v\": b[\"zcta\"],\n                \"travel_time_min\": t_min,\n            }\n        )\n\n        if count % 50 == 0:\n            print(f\"Processed {count}/{len(edges_idx)} edges...\")\n\n        # Be nice to OSRM:\n        # time.sleep(0.005)\n\n    edges_df = pd.DataFrame(edge_rows)\n    return G, edges_df\n\n\ndef main():\n    print(\"Loading ZCTAs...\")\n    df = load_zctas(INPUT_CSV)\n    print(f\"Loaded {len(df)} Utah ZCTAs\")\n\n    print(\"Building KNN edges...\")\n    edges_idx = build_knn_edges(df, K_NEIGHBORS)\n\n    print(\"Querying OSRM and building graph...\")\n    G, edges_df = build_graph(df, edges_idx)\n\n    print(f\"Graph has {G.number_of_nodes()} nodes and {G.number_of_edges()} edges\")\n\n    print(f\"Saving edges to {OUTPUT_EDGES_CSV} ...\")\n    edges_df.to_csv(OUTPUT_EDGES_CSV, index=False)\n\n    print(f\"Saving graph to {OUTPUT_GRAPH_PKL} ...\")\n    with open(OUTPUT_GRAPH_PKL, \"wb\") as f:\n        pickle.dump(G, f)\n\n    print(\"Done.\")\n\n\nif __name__ == \"__main__\":\n    main()", "code_hash": "45adcb2b8771abb35927e2240510ec25", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "iLit", "name": "_"}, {"code": "mo.md(r\"\"\"\n### We now have the whole graph minus the node weights. To determine the node weights we will need to know the population of each zip code _and_ the distance to the nearest LCDT machine.\n\n### We already have the population data. We need to retrieve the location of every hospital in Utah that has a LCDT machines and thus lung cancer screening capabilities. This information is tracked by the government via their \"Centers for Medicare \u0026 Medicaid services\" website:\n\nhttps://data.cms.gov/provider-summary-by-type-of-service/medicare-physician-other-practitioners\n\n### Let's take a look at it:\n\"\"\")", "code_hash": "580d119a1c5897fd92c8979a04e8af9e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZHCJ", "name": "_"}, {"code": "LCDT_hospitals = pd.read_csv(\"./LDCT_hospitals.csv\")\nLCDT_hospitals.head(10)", "code_hash": "1fee16ad96713066244698b008743a1a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ROlb", "name": "_"}, {"code": "mo.md(r\"\"\"\n### As you can see, this CSV contains a row for every hospital with LDCT machine in the US with its zip code and address.\n\n### I pre-filtered the CSV file from the CMS website to only include hospitals with the 71271 code which is the Medicare/Medicaid code for LDCT screenings, according to their website:\n\nhttps://www.cms.gov/medicare-coverage-database/view/article.aspx?articleid=58641\n\nWhile inspecting the data I manually cleaned by removing everything except for UT hospitals and their zip codes this to get to the following dataframe\n\"\"\")", "code_hash": "4edf726562ec90d606547666655a711e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "qnkX", "name": "_"}, {"code": "LDCT_utah_hospitals_zcta = pd.read_csv(\"./LDCT_utah_hospitals_zcta.csv\")\nLDCT_utah_hospitals_zcta.head(100)", "code_hash": "02860846ca880d4f55aaa4c22c09f8a9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "TqIu", "name": "_"}, {"code": "mo.md(r\"\"\"\n### These are the zipcodes in Utah that have LDCT machines. We now have everything we need to determine the node weights.\n\n### Node Weight = \"The travel time from this node/zip code to the nearest node/zip code with a LDCT machine\"\n\n### This is computed using Dijkstra's Algorithm\n\"\"\")", "code_hash": "6ae0fe3de49a80320fe98659cad09df0", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Vxnm", "name": "_"}, {"code": "UTAH_ZCTAS_CSV = \"utah_zctas.csv\"\nGRAPH_PKL = \"utah_graph.gpickle\"\nLDCT_ZCTAS_CSV = \"LDCT_utah_hospitals_zcta.csv\"\nOUTPUT_ACCESS_CSV = \"utah_ldct_access.csv\"\n\ndef load_graph(path: str):\n    with open(path, \"rb\") as f:\n        G = pickle.load(f)\n    if not isinstance(G, nx.Graph):\n        raise TypeError(\"Loaded object is not a NetworkX Graph\")\n    return G\n\n# Load node metadata\nzctas = pd.read_csv(UTAH_ZCTAS_CSV)\n# Normalize\nif \"GEOID\" in zctas.columns and \"zcta\" not in zctas.columns:\n    zctas = zctas.rename(columns={\"GEOID\": \"zcta\"})\nif \"INTPTLAT\" in zctas.columns and \"lat\" not in zctas.columns:\n    zctas = zctas.rename(columns={\"INTPTLAT\": \"lat\"})\nif \"INTPTLONG\" in zctas.columns and \"lon\" not in zctas.columns:\n    zctas = zctas.rename(columns={\"INTPTLONG\": \"lon\"})\n\nzctas[\"zcta\"] = zctas[\"zcta\"].astype(str).str.zfill(5)\n\n# Load graph\nprint(\"Loading graph...\")\nG = load_graph(GRAPH_PKL)\nprint(f\"Graph has {G.number_of_nodes()} nodes, {G.number_of_edges()} edges\")\n\n# Load LDCT ZCTAs\nldct_df = pd.read_csv(LDCT_ZCTAS_CSV)\nldct_df[\"zcta\"] = ldct_df[\"zcta\"].astype(str).str.zfill(5)\n\n# Restrict LDCT list to nodes actually present in graph\nldct_nodes = [z for z in ldct_df[\"zcta\"] if z in G.nodes]\nif not ldct_nodes:\n    raise ValueError(\"No LDCT ZCTAs matched nodes in the graph.\")\n\nprint(f\"Using {len(ldct_nodes)} LDCT source nodes\")\n\n# Multi-source Dijkstra: shortest travel_time_min to any LDCT node\n# Returns dict: {node: distance}\ndist = nx.multi_source_dijkstra_path_length(\n    G, sources=ldct_nodes, weight=\"travel_time_min\"\n)\n\n# Build result frame\nzctas[\"travel_time_to_ldct_min\"] = zctas[\"zcta\"].map(dist)\n\n# Some ZCTAs might be disconnected; mark them as NaN\n# Compute a simple need score\nzctas[\"need_score\"] = zctas[\"population\"] * zctas[\"travel_time_to_ldct_min\"]\n\n# Sort by need\nout = zctas.sort_values(\"need_score\", ascending=False)\n\nout.to_csv(OUTPUT_ACCESS_CSV, index=False)\nprint(f\"Saved {OUTPUT_ACCESS_CSV}\")\n# print(out[[\"zcta\", \"population\", \"travel_time_to_ldct_min\", \"need_score\"]].head(20))", "code_hash": "c9b994b15f1e2a312ba94fb06ebcb4f3", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "DnEU", "name": "_"}, {"code": "utah_ldct_access = pd.read_csv(\"./utah_ldct_access.csv\")\nutah_ldct_access.head(100)", "code_hash": "d0bc10337c5b042f4713f4d4f220eed9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ulZA", "name": "_"}, {"code": "# Top 20 by need_score\ntop_need = utah_ldct_access.sort_values(\"need_score\", ascending=False).head(20)\nprint(top_need[[\"zcta\", \"population\", \"travel_time_to_ldct_min\", \"need_score\"]])\n\n# How many ZCTAs are missing access (no path)?\nprint(\"\\n\")\nprint(\"NaN travel time:\", utah_ldct_access[\"travel_time_to_ldct_min\"].isna().sum())", "code_hash": "e40a7c44a007e6c81afc3fd6e4cf0d08", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ecfG", "name": "_"}, {"code": "mo.md(r\"\"\"\n### These are the 20 nodes/zip code that would benefit the most from a mobile LDCT visit. Obviously the number of zip codes that could actually be visited would be dependent on the resource constraints on the particular mobile LDCT unit, but I thought that 20 would be sufficient to present a proof of concept.\n\n### The last thing left to do is actually calculate the optimal path to these 20 zip codes, given the edges (and weights) of our graph.\n\"\"\")", "code_hash": "cff13bab34aefc3d1e7badcf1d4ab9a9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Pvdt", "name": "_"}, {"code": "def _():\n    def solve_tsp(distance_matrix, start_index):\n        \"\"\"Solve TSP using OR-Tools.\"\"\"\n        n = len(distance_matrix)\n\n        # 1 vehicle, depot at start_index\n        manager = pywrapcp.RoutingIndexManager(n, 1, start_index)\n        routing = pywrapcp.RoutingModel(manager)\n\n        def cost_callback(from_index, to_index):\n            f = manager.IndexToNode(from_index)\n            t = manager.IndexToNode(to_index)\n            return distance_matrix[f][t]\n\n        transit_callback_idx = routing.RegisterTransitCallback(cost_callback)\n        routing.SetArcCostEvaluatorOfAllVehicles(transit_callback_idx)\n\n        # Search parameters\n        search_parameters = pywrapcp.DefaultRoutingSearchParameters()\n        search_parameters.first_solution_strategy = (\n            routing_enums_pb2.FirstSolutionStrategy.PATH_CHEAPEST_ARC\n        )\n        # Optional: add a bit of local search for better routes\n        search_parameters.local_search_metaheuristic = (\n            routing_enums_pb2.LocalSearchMetaheuristic.GUIDED_LOCAL_SEARCH\n        )\n        search_parameters.time_limit.seconds = 30  # 30 seconds search time\n\n        solution = routing.SolveWithParameters(search_parameters)\n        if not solution:\n            raise RuntimeError(\"No solution found\")\n\n        # Extract route as list of node indices (0..n-1)\n        route = []\n        index = routing.Start(0)\n        while not routing.IsEnd(index):\n            node = manager.IndexToNode(index)\n            route.append(node)\n            index = solution.Value(routing.NextVar(index))\n        # Add final depot (so route starts and ends at SLC)\n        route.append(manager.IndexToNode(index))\n\n        return route\n\n\n    GRAPH_PKL = \"utah_graph.gpickle\"\n    NEED_SCORE_CSV = \"utah_ldct_access.csv\"\n    START_ZCTA = \"84101\"  # Salt Lake City downtown (can change)\n\n    # How many top sites to route (use your existing list)\n    TOP_N = 21\n\n\n    def load_graph():\n        with open(GRAPH_PKL, \"rb\") as f:\n            G = pickle.load(f)\n        return G\n\n\n    def build_distance_matrix(G, nodes):\n        \"\"\"Compute pairwise travel times (in minutes) for TSP.\"\"\"\n        n = len(nodes)\n        dist = [[0] * n for _ in range(n)]\n\n        for i, a in enumerate(nodes):\n            for j, b in enumerate(nodes):\n                if i == j:\n                    dist[i][j] = 0\n                    continue\n                # Use your graph's edge weights (multi-hop shortest path)\n                t = nx.shortest_path_length(G, a, b, weight=\"travel_time_min\")\n                dist[i][j] = int(t)  # OR-Tools requires integers\n        return dist\n\n\n    def solve_tsp(distance_matrix, start_index):\n        \"\"\"Solve TSP using OR-Tools.\"\"\"\n        n = len(distance_matrix)\n\n        # 1 vehicle, depot at start_index\n        manager = pywrapcp.RoutingIndexManager(n, 1, start_index)\n        routing = pywrapcp.RoutingModel(manager)\n\n        def cost_callback(from_index, to_index):\n            f = manager.IndexToNode(from_index)\n            t = manager.IndexToNode(to_index)\n            return distance_matrix[f][t]\n\n        transit_callback_idx = routing.RegisterTransitCallback(cost_callback)\n        routing.SetArcCostEvaluatorOfAllVehicles(transit_callback_idx)\n\n        # Search parameters\n        search_parameters = pywrapcp.DefaultRoutingSearchParameters()\n        search_parameters.first_solution_strategy = (\n            routing_enums_pb2.FirstSolutionStrategy.PATH_CHEAPEST_ARC\n        )\n        # Add a bit of local search for better routes\n        search_parameters.local_search_metaheuristic = (\n            routing_enums_pb2.LocalSearchMetaheuristic.GUIDED_LOCAL_SEARCH\n        )\n        search_parameters.time_limit.seconds = 30  # 30 seconds search time\n\n        solution = routing.SolveWithParameters(search_parameters)\n        if not solution:\n            raise RuntimeError(\"No solution found\")\n\n        # Extract route as list of node indices (0..n-1)\n        route = []\n        index = routing.Start(0)\n        while not routing.IsEnd(index):\n            node = manager.IndexToNode(index)\n            route.append(node)\n            index = solution.Value(routing.NextVar(index))\n        # Add final depot (so route starts and ends at SLC)\n        route.append(manager.IndexToNode(index))\n\n        return route\n\n\n\n    print(\"Loading graph...\")\n    G = load_graph()\n\n    print(\"Loading need-score data...\")\n    df = pd.read_csv(NEED_SCORE_CSV)\n    df[\"zcta\"] = df[\"zcta\"].astype(str)\n\n    # Select top N highest-need ZCTAs\n    top = df.sort_values(\"need_score\", ascending=False).head(TOP_N)\n    targets = list(top[\"zcta\"])\n\n    # Make sure starting ZCTA is included\n    if START_ZCTA not in targets:\n        targets = [START_ZCTA] + targets\n\n    print(\"Selected ZCTAs:\", targets)\n\n    # Build distance matrix\n    print(\"Computing pairwise travel times...\")\n    dist_matrix = build_distance_matrix(G, targets)\n\n    # Determine start index\n    start_idx = targets.index(START_ZCTA)\n\n    print(\"Solving TSP...\")\n    route_idx = solve_tsp(dist_matrix, start_idx)\n\n    route = [targets[i] for i in route_idx]\n\n    # print(\"\\nOptimal Route:\")\n    # for z in route:\n    #     print(z)\n\n    # Save route to CSV\n    pd.DataFrame({\"zcta\": route}).to_csv(\"optimal_route.csv\", index=False)\n    return print(\"\\nSaved optimal_route.csv\")\n\n_()", "code_hash": "61c08251074716b6c3c810206244fcbe", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZBYS", "name": "_"}, {"code": "optimal_route = pd.read_csv(\"./optimal_route.csv\")\noptimal_route.head(20)", "code_hash": "3dc9e8effd22038c0067cc4f43c79772", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aLJB", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Starting in SLC (84101), and then returning to SLC in a loop, this is the optimal zip code visitation path.\n\"\"\")", "code_hash": "7b50d2571f05d95db8bc56e2b87af4bf", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nHfw", "name": "_"}, {"code": "# Here we simply display that optimal route in an interactive box\ndef _():\n    ZCTAS_CSV = \"utah_zctas.csv\"\n    ROUTE_CSV = \"optimal_route.csv\"\n    OUTPUT_HTML = \"utah_ldct_route.html\"\n\n    # Load ZCTA centroids\n    zctas = pd.read_csv(ZCTAS_CSV)\n    # Normalize column names\n    zctas.columns = [c.lower() for c in zctas.columns]\n\n    if \"geoid\" in zctas.columns and \"zcta\" not in zctas.columns:\n        zctas = zctas.rename(columns={\"geoid\": \"zcta\"})\n    if \"intptlat\" in zctas.columns and \"lat\" not in zctas.columns:\n        zctas = zctas.rename(columns={\"intptlat\": \"lat\"})\n    if \"intptlong\" in zctas.columns and \"lon\" not in zctas.columns:\n        zctas = zctas.rename(columns={\"intptlong\": \"lon\"})\n\n    zctas[\"zcta\"] = zctas[\"zcta\"].astype(str).str.zfill(5)\n\n    # Load route (ordered ZCTAs)\n    route = pd.read_csv(ROUTE_CSV)\n    route.columns = [c.lower() for c in route.columns]\n    route[\"zcta\"] = route[\"zcta\"].astype(str).str.zfill(5)\n\n    # Join route with coordinates\n    route_coords = route.merge(zctas[[\"zcta\", \"lat\", \"lon\"]], on=\"zcta\", how=\"left\")\n\n    if route_coords[\"lat\"].isna().any():\n        missing = route_coords[route_coords[\"lat\"].isna()][\"zcta\"].unique()\n        raise ValueError(f\"Missing coordinates for ZCTAs: {missing}\")\n\n    # Create list of (lat, lon) points in route order\n    points = list(zip(route_coords[\"lat\"], route_coords[\"lon\"]))\n\n    # Center map on the mean of all route points\n    center_lat = route_coords[\"lat\"].mean()\n    center_lon = route_coords[\"lon\"].mean()\n\n    m = folium.Map(location=[center_lat, center_lon], zoom_start=7, tiles=\"OpenStreetMap\")\n\n    # Add straight-line polyline for the route\n    folium.PolyLine(\n        locations=points,\n        weight=4,\n        opacity=0.8,\n    ).add_to(m)\n\n    # Add markers for each stop\n    for _, row in route_coords.iterrows():\n        folium.CircleMarker(\n            location=[row[\"lat\"], row[\"lon\"]],\n            radius=4,\n            fill=True,\n            fill_opacity=0.9,\n            popup=f\"ZCTA {row['zcta']}\",\n        ).add_to(m)\n\n    # Highlight the start/end (Salt Lake City)\n    start = route_coords.iloc[0]\n    folium.Marker(\n        location=[start[\"lat\"], start[\"lon\"]],\n        popup=f\"Start (ZCTA {start['zcta']})\",\n        icon=folium.Icon(color=\"green\", icon=\"play\"),\n    ).add_to(m)\n\n    end = route_coords.iloc[-1]\n    folium.Marker(\n        location=[end[\"lat\"], end[\"lon\"]],\n        popup=f\"End (ZCTA {end['zcta']})\",\n        icon=folium.Icon(color=\"red\", icon=\"stop\"),\n    ).add_to(m)\n\n    # Save to HTML\n    m.save(OUTPUT_HTML)\n    return print(f\"Saved map to {OUTPUT_HTML}\")\n\n\n_()", "code_hash": "dc10a4eaae172d9c5d0b323edf58a13c", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "xXTn", "name": "_"}, {"code": "html = Path(\"utah_ldct_route.html\").read_text()\nmo.iframe(html, height=\"600px\")", "code_hash": "751433d4c44d1324f3174dd216dc1907", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "AjVT", "name": "_"}, {"code": "mo.md(r\"\"\"\n### As you can see the route matches intutition.\n\n### There are of course several things you could do to tune this route builder\n### First and foremost, depending on empircale data you might opt to make the need_score function more sophisticated than the simple product of population and distance\n### On the whole though this is a robust process that can easily be adapted to any other state or even the entire US. Given the data already found in this repo.\n\"\"\")", "code_hash": "1597cd4218d0618ed6b09083db576d16", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "pHFh", "name": "_"}, {"code": "mo.md(r\"\"\"\n## This is what you need to know to get the OSM data and the local OSMR server running.\n\n## If you have cloned the repo all you should need is the Docker Image and to start the server. Otherwise, you'll need to download the OSM data.\n\n### To get the environment set-up, first you will need to download the Utah OSM data:\n\nbash: curl -L -o utah.osm.pbf \"https://download.geofabrik.de/north-america/us/utah-latest.osm.pbf\"\n\n### You will also need to install the OSRM (Open Street Routing Machine) docker image:\n\nbash: docker pull osrm/osrm-backend\n\n### Then you will need to run some additional commands to get the OSRM server up and running locally:\n\n1) Extract for car profile\ndocker run -t -v $(pwd):/data osrm/osrm-backend osrm-extract -p /opt/car.lua /data/utah-latest.osm.pbf\n\n3) Contract (build routing graph)\ndocker run -t -v $(pwd):/data osrm/osrm-backend osrm-contract /data/utah-latest.osrm\n\n### Finally, you can start actually running the server with this command:\ndocker run --platform=linux/amd64 -t -i -p 5001:5000 \\\n  -v \"$(pwd)\":/data osrm/osrm-backend \\\n  osrm-routed --algorithm=CH /data/utah.osrm\n\"\"\")", "code_hash": "a12dc89d43ff2354e3b7e7229ac471eb", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "NCOB", "name": "_"}], "metadata": {"marimo_version": "0.17.6"}, "version": "1"},
            "session": {"cells": [{"code_hash": "91a6cb715ca6937892790857b53f0208", "console": [], "id": "Hbol", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "d177cd38a1e945a3df2b6d197d4d2c1e", "console": [], "id": "MJUe", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003ETo see the whole repository that made this notebook possible checkout:\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Ca href=\"https://github.com/TaylorBoan/Cancer-Traveling-Salesman.git\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://github.com/TaylorBoan/Cancer-Traveling-Salesman.git\u003C/a\u003E\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "6818bbb79b02240f18a35798d4036789", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch1 id=\"bio-362-final-project\"\u003EBio 362 Final Project\u003C/h1\u003E\n\u003Ch2 id=\"taylor-rubalcava\"\u003ETaylor Rubalcava\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4b93b389a173a4e6de6c3e13027378ee", "console": [], "id": "bkHC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"cancer-diagnosis-and-treatment-are-anything-but-trivial-requiring-highly-specialized-equipment-that-many-smaller-hospitals-simply-dont-have-on-site-this-creates-a-serious-problem-for-rural-and-less-densely-populated-areas-where-access-to-advanced-imaging-and-diagnostic-services-is-limited-early-detection-of-cancer-is-of-paramount-importance-yet-many-patients-in-these-regions-face-long-travel-times-delayed-screenings-and-a-reduced-likelihood-of-receiving-timely-care\"\u003ECancer diagnosis and treatment are anything but trivial, requiring highly specialized equipment that many smaller hospitals simply don\u2019t have on-site. This creates a serious problem for rural and less densely populated areas, where access to advanced imaging and diagnostic services is limited. Early detection of cancer is of paramount importance, yet many patients in these regions face long travel times, delayed screenings, and a reduced likelihood of receiving timely care.\u003C/h3\u003E\n\u003Ch3 id=\"one-solution-used-today-is-mobile-cancer-screening-units-specialized-vehicles-equipped-with-mammography-ultrasound-ct-or-lab-capabilities-that-travel-directly-to-underserved-communities-these-units-bridge-the-geographic-gap-by-bringing-essential-diagnostic-technologies-to-patients-instead-of-requiring-patients-to-travel-long-distances-to-large-medical-centers\"\u003EOne solution used today is mobile cancer screening units, specialized vehicles equipped with mammography, ultrasound, CT, or lab capabilities that travel directly to underserved communities. These units bridge the geographic gap by bringing essential diagnostic technologies to patients instead of requiring patients to travel long distances to large medical centers.\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "8959af06e15b3488d0a7dbe88776e214", "console": [], "id": "lEQa", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"designing-an-effective-route-for-these-mobile-screening-units-is-far-from-straightforward-rural-populations-are-not-only-sparsethey-are-often-geographically-fragmented-separated-by-long-distances-and-wide-variations-of-local-need-and-demand-an-optimal-route-must-balance-clinical-need-population-density-travel-time-and-operational-constraints-of-the-mobile-unit-itself\"\u003EDesigning an effective route for these mobile screening units is far from straightforward. Rural populations are not only sparse\u2014they are often geographically fragmented, separated by long distances and wide variations of local need and demand. An optimal route must balance clinical need, population density, travel time, and operational constraints of the mobile unit itself.\u003C/h3\u003E\n\u003Ch3 id=\"routing-therefore-becomes-a-logistics-problem-as-much-as-a-healthcare-problem-how-can-we-design-a-route-that-maximizes-the-number-of-at-risk-individuals-reached-minimizes-idle-travel-and-ensures-predictable-recurring-access-for-communities-that-need-it-most\"\u003ERouting therefore becomes a logistics problem as much as a healthcare problem. How can we design a route that maximizes the number of at-risk individuals reached, minimizes idle travel, and ensures predictable, recurring access for communities that need it most?\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "a02fc373b23dcee03fe684757f4fe7b6", "console": [], "id": "PKri", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"here-we-will-explore-how-an-optimal-route-can-be-calculated-using-available-open-source-software-and-data-to-simplify-our-calculations-we-will-make-several-assumptions\"\u003EHere we will explore how an optimal route can be calculated using available open-source software and data. To simplify our calculations we will make several assumptions:\u003C/h3\u003E\n\u003Col\u003E\n\u003Cli\u003EWe will only consder populations and hospitals found in Utah\u003C/li\u003E\n\u003Cli\u003EWe will calculate the optimal route for a mobile unit only serving Utah residents\u003C/li\u003E\n\u003Cli\u003EWe will only consder the need for lung cancer screening and the neccesary Low-Dose-CT machine needed. (LDCT)\u003C/li\u003E\n\u003C/ol\u003E\n\u003Ch3 id=\"these-assumptions-will-make-our-computational-requirements-more-manageable-while-making-it-easy-to-expand-our-calculations-after-a-proof-of-concept\"\u003EThese assumptions will make our computational requirements more manageable while making it easy to expand our calculations after a proof of concept.\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003EWe are focusing on Utah because that is where I live. We are focusing on lung cancer screening because not only is it one of the most deadly and common types of cancer but it is also the most difficult to screen for. Mobile LDCT buses/trailers (and LDCT machines themsevles) exist but they are rare, expensive, and as such the most in need of an optimal route.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "702fd42add149e12e78af3ac9d00e033", "console": [], "id": "Xref", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"the-most-obvious-model-is-an-undirected-graph-with-weighted-nodes-and-edges-each-node-will-represent-a-populated-area-and-each-edge-represents-travel-paths-between-cities-each-nodes-weight-will-be-determined-by-its-population-and-access-to-local-cancer-screening-facilities-each-edges-weight-will-be-the-time-required-to-travel-between-those-two-cities-once-we-have-built-our-graph-we-can-use-it-to-solve-our-weighted-traveling-salesman-problem-wtsp\"\u003EThe most obvious model is an undirected graph with weighted nodes and edges. Each node will represent a populated area and each edge represents travel paths between cities. Each node's weight will be determined by it's population and access to local cancer screening facilities. Each edge's weight will be the time required to travel between those two cities. Once we have built our graph we can use it to solve our weighted traveling salesman problem (WTSP).\u003C/h3\u003E\n\u003Ch3 id=\"in-summary-we-need\"\u003EIn summary we need:\u003C/h3\u003E\n\u003Col\u003E\n\u003Cli\u003ENodes (Locations we \u003Cem\u003Ecould\u003C/em\u003E visit)\u003C/li\u003E\n\u003Cli\u003ENodes' weights (How much those places are in need of mobile screening)\u003C/li\u003E\n\u003Cli\u003EEdges (Paths between locations)\u003C/li\u003E\n\u003Cli\u003EEdges' weights (How long it takes to get between locations, a fair approximation of cost)\u003C/li\u003E\n\u003C/ol\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4f334c63aecb500648b2c0500465a934", "console": [], "id": "SFPL", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"the-first-thing-we-need-are-the-nodes-or-possible-locations-zip-code-tabulation-areas-zctas-are-widely-used-in-healthcare-access-modeling-and-so-that-is-what-we-will-use-here-each-zcta-in-utah-will-be-a-possible-node\"\u003EThe first thing we need are the nodes, or possible locations. ZIP Code Tabulation Areas (ZCTAs) are widely used in healthcare access modeling and so that is what we will use here. Each ZCTA in Utah will be a possible node.\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003EI was able to find this 2023 data containing a lat and lon point for each zip code in the United States:\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Ca href=\"https://www2.census.gov/geo/docs/maps-data/data/gazetteer/2023_Gazetteer/2023_Gaz_zcta_national.zip\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://www2.census.gov/geo/docs/maps-data/data/gazetteer/2023_Gazetteer/2023_Gaz_zcta_national.zip\u003C/a\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EHere it is,  as well as the interpretations for each column:\nGEOID = Zip Code (Revelant to us)\nALAND = Area Land\nAWATER = Area Water\nALAND_SQMI = Area Land by Square Mile\nAWATER_SQMI = Area Water by Square Mile\nINTPTLAT = Internal Point Latitude\nINTPTLONG = Internal Point Longitude\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "102c5e3eed43ac47feeb2a676faff0b5", "console": [], "id": "BYtC", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='BYtC-0' random-id='a3d43a0d-7379-29f5-9781-7217fa4fee8c'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00601\u0026#92;\u0026#92;t166848592\u0026#92;\u0026#92;t798613\u0026#92;\u0026#92;t64.421\u0026#92;\u0026#92;t0.308\u0026#92;\u0026#92;t18.180555\u0026#92;\u0026#92;t-66.749961                                                                                                                                                \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00602\u0026#92;\u0026#92;t78546711\u0026#92;\u0026#92;t4428428\u0026#92;\u0026#92;t30.327\u0026#92;\u0026#92;t1.71\u0026#92;\u0026#92;t18.361945\u0026#92;\u0026#92;t-67.175597                                                                                                                                                 \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00603\u0026#92;\u0026#92;t88980555\u0026#92;\u0026#92;t6253316\u0026#92;\u0026#92;t34.356\u0026#92;\u0026#92;t2.414\u0026#92;\u0026#92;t18.457399\u0026#92;\u0026#92;t-67.124867                                                                                                                                                \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00606\u0026#92;\u0026#92;t114825641\u0026#92;\u0026#92;t12228\u0026#92;\u0026#92;t44.334\u0026#92;\u0026#92;t0.005\u0026#92;\u0026#92;t18.158327\u0026#92;\u0026#92;t-66.932928                                                                                                                                                 \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00610\u0026#92;\u0026#92;t96150194\u0026#92;\u0026#92;t4289688\u0026#92;\u0026#92;t37.124\u0026#92;\u0026#92;t1.656\u0026#92;\u0026#92;t18.295304\u0026#92;\u0026#92;t-67.12518                                                                                                                                                 \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00611\u0026#92;\u0026#92;t27570859\u0026#92;\u0026#92;t3631\u0026#92;\u0026#92;t10.645\u0026#92;\u0026#92;t0.001\u0026#92;\u0026#92;t18.276316\u0026#92;\u0026#92;t-66.807165                                                                                                                                                   \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00612\u0026#92;\u0026#92;t197202755\u0026#92;\u0026#92;t15258391\u0026#92;\u0026#92;t76.14\u0026#92;\u0026#92;t5.891\u0026#92;\u0026#92;t18.416727\u0026#92;\u0026#92;t-66.70009                                                                                                                                                \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00616\u0026#92;\u0026#92;t28189755\u0026#92;\u0026#92;t143499\u0026#92;\u0026#92;t10.884\u0026#92;\u0026#92;t0.055\u0026#92;\u0026#92;t18.420412\u0026#92;\u0026#92;t-66.671979                                                                                                                                                 \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00617\u0026#92;\u0026#92;t47538644\u0026#92;\u0026#92;t1692937\u0026#92;\u0026#92;t18.355\u0026#92;\u0026#92;t0.654\u0026#92;\u0026#92;t18.446889\u0026#92;\u0026#92;t-66.561154                                                                                                                                                \u0026#92;\u0026quot;},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026#92;tALAND\u0026#92;\u0026#92;tAWATER\u0026#92;\u0026#92;tALAND_SQMI\u0026#92;\u0026#92;tAWATER_SQMI\u0026#92;\u0026#92;tINTPTLAT\u0026#92;\u0026#92;tINTPTLONG                                                                                                                                  \u0026#92;\u0026quot;:\u0026#92;\u0026quot;00622\u0026#92;\u0026#92;t80724807\u0026#92;\u0026#92;t19583150\u0026#92;\u0026#92;t31.168\u0026#92;\u0026#92;t7.561\u0026#92;\u0026#92;t17.988103\u0026#92;\u0026#92;t-67.160357                                                                                                                                               \u0026#92;\u0026quot;}]\u0026quot;' data-total-rows='10' data-total-columns='1' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;GEOID\u0026#92;tALAND\u0026#92;tAWATER\u0026#92;tALAND_SQMI\u0026#92;tAWATER_SQMI\u0026#92;tINTPTLAT\u0026#92;tINTPTLONG                                                                                                                                  \u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='false' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "f002540ee5d3aebcb895bd404ffb7df5", "console": [], "id": "RGSE", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"nodes\"\u003ENodes \u2705\u003C/h3\u003E\n\u003Ch3 id=\"i-also-found-this-census-data-that-has-the-population-for-each-zip-code\"\u003EI also found this census data that has the population for each zip code\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Ca href=\"https://api.census.gov/data/2023/acs/acs5?get=NAME,B01003_001E\u0026amp;for=zip%20code%20tabulation%20area\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://api.census.gov/data/2023/acs/acs5?get=NAME,B01003_001E\u0026amp;for=zip%20code%20tabulation%20area\u003C/a\u003E:*\u003C/span\u003E\n\u003Ch3 id=\"we-will-eventually-need-this-for-our-node-weights-calculation\"\u003EWe will eventually need this for our node weights calculation.\u003C/h3\u003E\n\u003Ch3 id=\"unfortunately-neither-of-these-links-lead-to-clean-csv-data-the-script-that-read-cleaned-and-merged-these-two-pieces-of-data-is-found-in-build_utah_zctaspy-this-resulted-in-this-csv-file\"\u003EUnfortunately, neither of these links lead to clean .csv data. The script that read, cleaned, and merged these two pieces of data is found in build_utah_zctas.py. This resulted in this csv file:\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "2c24cf91d5c2d8b1a694643641f734f9", "console": [], "id": "Kclp", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='Kclp-0' random-id='a628b13a-a135-1c55-ff2c-4c0bd7f8adc0'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:601,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:166848592,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:798613,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:64.421,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:0.308,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.180555,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-66.749961,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:16721.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:602,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:78546711,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:4428428,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:30.327,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:1.71,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.361945,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-67.175597,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:37510.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:603,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:88980555,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:6253316,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:34.356,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:2.414,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.457399,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-67.124867,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:48317.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:606,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:114825641,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:12228,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:44.334,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:0.005,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.158327,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-66.932928,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:5435.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:610,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:96150194,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:4289688,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:37.124,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:1.656,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.295304,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-67.12518,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:25413.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:611,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:27570859,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:3631,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:10.645,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:0.001,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.276316,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-66.807165,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:1522.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:612,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:197202755,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:15258391,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:76.14,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:5.891,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.416727,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-66.70009,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:62462.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:616,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:28189755,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:143499,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:10.884,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:0.055,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.420412,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-66.671979,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:9836.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:617,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:47538644,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:1692937,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:18.355,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:0.654,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:18.446889,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-66.561154,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:22699.0},{\u0026#92;\u0026quot;GEOID\u0026#92;\u0026quot;:622,\u0026#92;\u0026quot;ALAND\u0026#92;\u0026quot;:80724807,\u0026#92;\u0026quot;AWATER\u0026#92;\u0026quot;:19583150,\u0026#92;\u0026quot;ALAND_SQMI\u0026#92;\u0026quot;:31.168,\u0026#92;\u0026quot;AWATER_SQMI\u0026#92;\u0026quot;:7.561,\u0026#92;\u0026quot;INTPTLAT\u0026#92;\u0026quot;:17.988103,\u0026#92;\u0026quot;INTPTLONG\u0026#92;\u0026quot;:-67.160357,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:7950.0}]\u0026quot;' data-total-rows='10' data-total-columns='8' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;GEOID\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;ALAND\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;AWATER\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;ALAND_SQMI\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;AWATER_SQMI\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;INTPTLAT\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;INTPTLONG\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;population\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='false' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "6e14c3c8afb5f119081815e997d16d65", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"which-i-then-manually-filtered-and-cleaned-to-utah-only-zip-codesgeoids-while-inspecting-it-in-numbers\"\u003EWhich I then manually filtered and cleaned to Utah only Zip Codes/GEOIDs while inspecting it in Numbers:\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "f6dafefbdace24e08ad3edf96b82d3ec", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "298\n", "type": "stream"}], "id": "Hstk", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "ae4ed9e829d93fa8b7eec13dfa6a4ffb", "console": [], "id": "nWHF", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"now-we-have-the-nodes-and-their-populations-this-is-enough-to-begin-building-the-graph\"\u003ENow we have the nodes and their populations. This is enough to begin building the graph.\u003C/h3\u003E\n\u003Ch3 id=\"we-could-simply-connect-every-node-to-every-other-node-but-that-would-be-an-inefficient-n2-graph-with-88k-edges-ideally-we-only-connect-nodeszip-codes-to-their-neighboring-nodeszipcodes-we-will-use-the-k-nearest-neighbors-knn-algorithm-to-determine-edge-locations\"\u003EWe could simply connect every node to every other node, but that would be an inefficient N^2 graph with ~88k edges. Ideally, we only connect nodes/zip codes to their neighboring nodes/zipcodes. We will use the K-Nearest Neighbors (KNN) algorithm to determine edge locations.\u003C/h3\u003E\n\u003Ch3 id=\"we-also-need-to-determine-the-weights-for-those-edges-the-weight-for-any-given-edge-is-how-long-it-takes-to-drive-between-the-two-nodeszip-codes-that-edge-connects-unfortunately-the-google-maps-api-is-paid-and-requires-api-keys-instead-i-will-use-open-street-maps-and-open-street-maps-and-open-source-routing-machine-osm-and-osrm-respectively-to-do-this-i-had-to-download-the-osm-data-for-utah-and-set-up-a-local-osmr-server\"\u003EWe also need to determine the weights for those edges. The weight for any given edge is how long it takes to drive between the two nodes/zip codes that edge connects. Unfortunately the Google Maps API is paid and requires API Keys. Instead I will use Open Street Maps and Open Street Maps and Open Source Routing Machine. OSM and OSRM respectively. To do this I had to download the OSM data for Utah and set up a local OSMR server.\u003C/h3\u003E\n\u003Ch3 id=\"in-summary-we-will-use\"\u003EIn summary we will use:\u003C/h3\u003E\n\u003Col\u003E\n\u003Cli\u003ESklearn to find each nodes k nearest neighbors / edges\u003C/li\u003E\n\u003Cli\u003EOSMR to get the travel time/weights for each of those edges\u003C/li\u003E\n\u003Cli\u003ENetworkX to create the graph including the nodes, edges, and edge weights\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cspan class=\"paragraph\"\u003ENote, that in order for the following code to work the OSMR server must be running on port 5001\nThese are the commands that I used to download the neccesary OSM data and start the OSMR server:\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003EFor more detailsa about how to setup this server locally see the bottom of this notebook\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "45adcb2b8771abb35927e2240510ec25", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Loading ZCTAs...\nLoaded 298 Utah ZCTAs\nBuilding KNN edges...\nKNN created 1163 unique edges for 298 nodes\nQuerying OSRM and building graph...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 50/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 100/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 150/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 200/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 250/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 300/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 350/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 400/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 450/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 500/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 550/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 600/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 650/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 700/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 750/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 800/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 850/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 900/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 950/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 1000/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 1050/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 1100/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Processed 1150/1163 edges...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Graph has 298 nodes and 1163 edges\nSaving edges to utah_edges.csv ...\nSaving graph to utah_graph.gpickle ...\nDone.\n", "type": "stream"}], "id": "iLit", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "580d119a1c5897fd92c8979a04e8af9e", "console": [], "id": "ZHCJ", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"we-now-have-the-whole-graph-minus-the-node-weights-to-determine-the-node-weights-we-will-need-to-know-the-population-of-each-zip-code-and-the-distance-to-the-nearest-lcdt-machine\"\u003EWe now have the whole graph minus the node weights. To determine the node weights we will need to know the population of each zip code \u003Cem\u003Eand\u003C/em\u003E the distance to the nearest LCDT machine.\u003C/h3\u003E\n\u003Ch3 id=\"we-already-have-the-population-data-we-need-to-retrieve-the-location-of-every-hospital-in-utah-that-has-a-lcdt-machines-and-thus-lung-cancer-screening-capabilities-this-information-is-tracked-by-the-government-via-their-centers-for-medicare-medicaid-services-website\"\u003EWe already have the population data. We need to retrieve the location of every hospital in Utah that has a LCDT machines and thus lung cancer screening capabilities. This information is tracked by the government via their \"Centers for Medicare \u0026amp; Medicaid services\" website:\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Ca href=\"https://data.cms.gov/provider-summary-by-type-of-service/medicare-physician-other-practitioners\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://data.cms.gov/provider-summary-by-type-of-service/medicare-physician-other-practitioners\u003C/a\u003E\u003C/span\u003E\n\u003Ch3 id=\"lets-take-a-look-at-it\"\u003ELet's take a look at it:\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "1fee16ad96713066244698b008743a1a", "console": [], "id": "ROlb", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='ROlb-0' random-id='29a4b258-97cd-57ce-5b5a-dd5ef1720824'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003002148,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Owens\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Justin\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;243 Curtiss Rd\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Ste 100\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Barksdale Afb\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;LA\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:71110,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;F\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:13},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003013129,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Sheehan\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;David\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;595 W State St\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Doylestown Radiology Associates\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Doylestown\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;PA\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:18901,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Interventional Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;O\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:18},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003014473,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Barak\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Rakesh\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;169 Martin Ave\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:null,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Ephrata\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;PA\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:17522,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;F\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:13},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003014473,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Barak\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Rakesh\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;169 Martin Ave\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:null,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Ephrata\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;PA\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:17522,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;O\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:41},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003015553,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Fishman\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Michael\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;19020 33rd Ave W\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Suite 210\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Lynnwood\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;WA\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:98036,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;F\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:29},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003015553,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Fishman\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Michael\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;19020 33rd Ave W\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Suite 210\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Lynnwood\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;WA\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:98036,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;O\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:28},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003018276,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Reiman\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Steven\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;3901 W 15th St\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:null,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Plano\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;TX\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:75075,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;F\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:32},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003025594,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Ireland\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Jamie\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;4300 West 7th Street\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:\u0026#92;\u0026quot;John L. Mcclellan Memorial Veterans Hospital\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Little Rock\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;AR\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:72205,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;F\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:29},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003027376,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Junck\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Anthony\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;620 Crossover Rd\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:null,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Tupelo\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;MS\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:38801,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;F\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:32},{\u0026#92;\u0026quot;Rndrng_NPI\u0026#92;\u0026quot;:1003027376,\u0026#92;\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Junck\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_First_Name\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Anthony\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St1\u0026#92;\u0026quot;:\u0026#92;\u0026quot;620 Crossover Rd\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_St2\u0026#92;\u0026quot;:null,\u0026#92;\u0026quot;Rndrng_Prvdr_City\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Tupelo\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026#92;\u0026quot;:\u0026#92;\u0026quot;MS\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Zip5\u0026#92;\u0026quot;:38801,\u0026#92;\u0026quot;Rndrng_Prvdr_Cntry\u0026#92;\u0026quot;:\u0026#92;\u0026quot;US\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Rndrng_Prvdr_Type\u0026#92;\u0026quot;:\u0026#92;\u0026quot;Diagnostic Radiology\u0026#92;\u0026quot;,\u0026#92;\u0026quot;HCPCS_Cd\u0026#92;\u0026quot;:71271,\u0026#92;\u0026quot;Place_Of_Srvc\u0026#92;\u0026quot;:\u0026#92;\u0026quot;O\u0026#92;\u0026quot;,\u0026#92;\u0026quot;Tot_Srvcs\u0026#92;\u0026quot;:12}]\u0026quot;' data-total-rows='10' data-total-columns='13' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;Rndrng_NPI\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;Rndrng_Prvdr_Last_Org_Name\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_First_Name\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_St1\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_St2\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_City\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_State_Abrvtn\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_Zip5\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;Rndrng_Prvdr_Cntry\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Rndrng_Prvdr_Type\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;HCPCS_Cd\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;Place_Of_Srvc\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;Tot_Srvcs\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='false' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "4edf726562ec90d606547666655a711e", "console": [], "id": "qnkX", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"as-you-can-see-this-csv-contains-a-row-for-every-hospital-with-ldct-machine-in-the-us-with-its-zip-code-and-address\"\u003EAs you can see, this CSV contains a row for every hospital with LDCT machine in the US with its zip code and address.\u003C/h3\u003E\n\u003Ch3 id=\"i-pre-filtered-the-csv-file-from-the-cms-website-to-only-include-hospitals-with-the-71271-code-which-is-the-medicaremedicaid-code-for-ldct-screenings-according-to-their-website\"\u003EI pre-filtered the CSV file from the CMS website to only include hospitals with the 71271 code which is the Medicare/Medicaid code for LDCT screenings, according to their website:\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Ca href=\"https://www.cms.gov/medicare-coverage-database/view/article.aspx?articleid=58641\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://www.cms.gov/medicare-coverage-database/view/article.aspx?articleid=58641\u003C/a\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EWhile inspecting the data I manually cleaned by removing everything except for UT hospitals and their zip codes this to get to the following dataframe\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "02860846ca880d4f55aaa4c22c09f8a9", "console": [], "id": "TqIu", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='TqIu-0' random-id='f7d5c860-be21-dbb2-0973-f358252cef5e'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84107},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84403},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84119},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84132},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84124},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84124},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84790},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84025},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84025},{\u0026#92;\u0026quot;State\u0026#92;\u0026quot;:\u0026#92;\u0026quot;UT\u0026#92;\u0026quot;,\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84025}]\u0026quot;' data-total-rows='18' data-total-columns='2' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;State\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;zcta\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='true' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "6ae0fe3de49a80320fe98659cad09df0", "console": [], "id": "Vxnm", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"these-are-the-zipcodes-in-utah-that-have-ldct-machines-we-now-have-everything-we-need-to-determine-the-node-weights\"\u003EThese are the zipcodes in Utah that have LDCT machines. We now have everything we need to determine the node weights.\u003C/h3\u003E\n\u003Ch3 id=\"node-weight-the-travel-time-from-this-nodezip-code-to-the-nearest-nodezip-code-with-a-ldct-machine\"\u003ENode Weight = \"The travel time from this node/zip code to the nearest node/zip code with a LDCT machine\"\u003C/h3\u003E\n\u003Ch3 id=\"this-is-computed-using-dijkstras-algorithm\"\u003EThis is computed using Dijkstra's Algorithm\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "c9b994b15f1e2a312ba94fb06ebcb4f3", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Loading graph...\nGraph has 298 nodes, 1163 edges\nUsing 15 LDCT source nodes\nSaved utah_ldct_access.csv\n", "type": "stream"}], "id": "DnEU", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "d0bc10337c5b042f4713f4d4f220eed9", "console": [], "id": "ulZA", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='ulZA-0' random-id='4b153b81-0239-6329-2b52-6f30d76c780d'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84078,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:40.465526,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-109.510856,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:30669,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:325.9783333333,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:9997429.505},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84321,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:41.774813,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-111.712761,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:49811,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:145.035,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:7224338.385},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84532,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:38.517666,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-109.385155,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:10648,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:598.1733333333,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:6369349.653333334},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84501,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:39.530532,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-110.810886,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:13002,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:400.5916666667,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:5208492.850000001},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84660,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:40.040637,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-111.419114,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:47004,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:105.7283333333,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:4969654.580000001},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84045,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:40.292383,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-111.928756,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:43369,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:112.5166666667,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:4879735.316666666},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84066,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:40.346286,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-110.067282,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:14626,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:265.15,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:3878083.899999999},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84404,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:41.269519,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-112.117658,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:65875,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:54.885,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:3615549.375000001},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84096,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:40.487037,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-112.099983,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:71115,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:47.0666666667,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:3347145.9999999995},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84341,\u0026#92;\u0026quot;lat\u0026#92;\u0026quot;:41.770678,\u0026#92;\u0026quot;lon\u0026#92;\u0026quot;:-111.812392,\u0026#92;\u0026quot;population\u0026#92;\u0026quot;:25791,\u0026#92;\u0026quot;travel_time_to_ldct_min\u0026#92;\u0026quot;:129.39,\u0026#92;\u0026quot;need_score\u0026#92;\u0026quot;:3337097.49}]\u0026quot;' data-total-rows='100' data-total-columns='6' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;zcta\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;lat\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;lon\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;population\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;travel_time_to_ldct_min\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;need_score\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='true' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "e40a7c44a007e6c81afc3fd6e4cf0d08", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "     zcta  population  travel_time_to_ldct_min    need_score\n0   84078       30669               325.978333  9.997430e+06\n1   84321       49811               145.035000  7.224338e+06\n2   84532       10648               598.173333  6.369350e+06\n3   84501       13002               400.591667  5.208493e+06\n4   84660       47004               105.728333  4.969655e+06\n..    ...         ...                      ...           ...\n15  84701        8756               327.505000  2.867634e+06\n16  84302       26711                98.286667  2.625335e+06\n17  84074       57470                45.053333  2.589215e+06\n18  84003       55259                46.070000  2.545782e+06\n19  84720       24323               104.160000  2.533484e+06\n\n[20 rows x 4 columns]\n\n\nNaN travel time: 0\n", "type": "stream"}], "id": "ecfG", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "cff13bab34aefc3d1e7badcf1d4ab9a9", "console": [], "id": "Pvdt", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"these-are-the-20-nodeszip-code-that-would-benefit-the-most-from-a-mobile-ldct-visit-obviously-the-number-of-zip-codes-that-could-actually-be-visited-would-be-dependent-on-the-resource-constraints-on-the-particular-mobile-ldct-unit-but-i-thought-that-20-would-be-sufficient-to-present-a-proof-of-concept\"\u003EThese are the 20 nodes/zip code that would benefit the most from a mobile LDCT visit. Obviously the number of zip codes that could actually be visited would be dependent on the resource constraints on the particular mobile LDCT unit, but I thought that 20 would be sufficient to present a proof of concept.\u003C/h3\u003E\n\u003Ch3 id=\"the-last-thing-left-to-do-is-actually-calculate-the-optimal-path-to-these-20-zip-codes-given-the-edges-and-weights-of-our-graph\"\u003EThe last thing left to do is actually calculate the optimal path to these 20 zip codes, given the edges (and weights) of our graph.\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "61c08251074716b6c3c810206244fcbe", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Loading graph...\nLoading need-score data...\nSelected ZCTAs: ['84101', '84078', '84321', '84532', '84501', '84660', '84045', '84066', '84404', '84096', '84341', '84721', '84062', '84511', '84005', '84043', '84701', '84302', '84074', '84003', '84720', '84335']\nComputing pairwise travel times...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "Solving TSP...\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "\nSaved optimal_route.csv\n", "type": "stream"}], "id": "ZBYS", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "3dc9e8effd22038c0067cc4f43c79772", "console": [], "id": "aLJB", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='aLJB-0' random-id='3c60783a-8db3-8aec-0a13-594c3d382e1e'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84101},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84003},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84062},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84066},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84078},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84501},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84532},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84511},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84701},{\u0026#92;\u0026quot;zcta\u0026#92;\u0026quot;:84721}]\u0026quot;' data-total-rows='20' data-total-columns='1' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;zcta\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='true' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "7b50d2571f05d95db8bc56e2b87af4bf", "console": [], "id": "nHfw", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"starting-in-slc-84101-and-then-returning-to-slc-in-a-loop-this-is-the-optimal-zip-code-visitation-path\"\u003EStarting in SLC (84101), and then returning to SLC in a loop, this is the optimal zip code visitation path.\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "dc10a4eaae172d9c5d0b323edf58a13c", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Saved map to utah_ldct_route.html\n", "type": "stream"}], "id": "xXTn", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "751433d4c44d1324f3174dd216dc1907", "console": [], "id": "AjVT", "outputs": [{"data": {"text/html": "\u003Ciframe srcdoc='\u0026lt;!DOCTYPE html\u0026gt;\u0026lt;html\u0026gt;\u0026lt;head\u0026gt;\u0026lt;meta http-equiv=\u0026quot;content-type\u0026quot; content=\u0026quot;text/html; charset=UTF-8\u0026quot; /\u0026gt;\u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\u0026lt;script src=\u0026quot;https://code.jquery.com/jquery-3.7.1.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\u0026lt;script src=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css\u0026quot;/\u0026gt;\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\u0026quot;/\u0026gt;\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css\u0026quot;/\u0026gt;\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css\u0026quot;/\u0026gt;\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css\u0026quot;/\u0026gt;\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css\u0026quot;/\u0026gt;\u0026lt;meta name=\u0026quot;viewport\u0026quot; content=\u0026quot;width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no\u0026quot; /\u0026gt;\u0026lt;style\u0026gt;#map_b7516fb67ae691c9c050f3812735db05 {position: relative;width: 100.0%;height: 100.0%;left: 0.0%;top: 0.0%;}.leaflet-container { font-size: 1rem; }\u0026lt;/style\u0026gt;\u0026lt;style\u0026gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}\u0026lt;/style\u0026gt;\u0026lt;style\u0026gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}\u0026lt;/style\u0026gt;\u0026lt;script\u0026gt;L_NO_TOUCH = false;L_DISABLE_3D = false;\u0026lt;/script\u0026gt;\u0026lt;/head\u0026gt;\u0026lt;body\u0026gt;\u0026lt;div class=\u0026quot;folium-map\u0026quot; id=\u0026quot;map_b7516fb67ae691c9c050f3812735db05\u0026quot; \u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/body\u0026gt;\u0026lt;script\u0026gt;var map_b7516fb67ae691c9c050f3812735db05 = L.map(\u0026quot;map_b7516fb67ae691c9c050f3812735db05\u0026quot;,{center: [40.133408826086956, -111.5555444347826],crs: L.CRS.EPSG3857,...{\u0026quot;zoom\u0026quot;: 7,\u0026quot;zoomControl\u0026quot;: true,\u0026quot;preferCanvas\u0026quot;: false,}});var tile_layer_4c4b2ed177bcb4504a4a24a5d0370a5d = L.tileLayer(\u0026quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png\u0026quot;,{\u0026quot;minZoom\u0026quot;: 0,\u0026quot;maxZoom\u0026quot;: 19,\u0026quot;maxNativeZoom\u0026quot;: 19,\u0026quot;noWrap\u0026quot;: false,\u0026quot;attribution\u0026quot;: \u0026quot;\\u0026copy; \\u003ca href=\\\u0026quot;https://www.openstreetmap.org/copyright\\\u0026quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors\u0026quot;,\u0026quot;subdomains\u0026quot;: \u0026quot;abc\u0026quot;,\u0026quot;detectRetina\u0026quot;: false,\u0026quot;tms\u0026quot;: false,\u0026quot;opacity\u0026quot;: 1,});tile_layer_4c4b2ed177bcb4504a4a24a5d0370a5d.addTo(map_b7516fb67ae691c9c050f3812735db05);var poly_line_553f36f20493dc3e5863e431da30ed5d = L.polyline([[40.756311, -111.899962], [40.471654, -111.68059], [40.383842, -111.681871], [40.346286, -110.067282], [40.465526, -109.510856], [39.530532, -110.810886], [38.517666, -109.385155], [37.527347, -109.411511], [38.590731, -111.800446], [37.768677, -113.133595], [37.593409, -113.292337], [40.040637, -111.419114], [40.292383, -111.928756], [40.322736, -111.999426], [40.411552, -111.87428], [40.487037, -112.099983], [40.582074, -112.303592], [41.269519, -112.117658], [41.584713, -112.051612], [41.823969, -111.883495], [41.770678, -111.812392], [41.774813, -111.712761], [40.756311, -111.899962]],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: false, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.2, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;noClip\u0026quot;: false, \u0026quot;opacity\u0026quot;: 0.8, \u0026quot;smoothFactor\u0026quot;: 1.0, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 4}).addTo(map_b7516fb67ae691c9c050f3812735db05);var circle_marker_7e3547b0f517431a1bcd53313af0f326 = L.circleMarker([40.756311, -111.899962],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_78e9898ae84ee5ecfa709ecca1cd41d1 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_315de775390a2e7be6d4bdbd5b617679 = $(`\u0026lt;div id=\u0026quot;html_315de775390a2e7be6d4bdbd5b617679\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84101\u0026lt;/div\u0026gt;`)[0];popup_78e9898ae84ee5ecfa709ecca1cd41d1.setContent(html_315de775390a2e7be6d4bdbd5b617679);circle_marker_7e3547b0f517431a1bcd53313af0f326.bindPopup(popup_78e9898ae84ee5ecfa709ecca1cd41d1);var circle_marker_1a9e144065124eb1acf2d3c290540462 = L.circleMarker([40.471654, -111.68059],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_78e10d660c6e8fcec16fd8823263d94b = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_84f31558c9646c0d2afed4fd2ae21adc = $(`\u0026lt;div id=\u0026quot;html_84f31558c9646c0d2afed4fd2ae21adc\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84003\u0026lt;/div\u0026gt;`)[0];popup_78e10d660c6e8fcec16fd8823263d94b.setContent(html_84f31558c9646c0d2afed4fd2ae21adc);circle_marker_1a9e144065124eb1acf2d3c290540462.bindPopup(popup_78e10d660c6e8fcec16fd8823263d94b);var circle_marker_cee100fae793abb33826abbdf78dac29 = L.circleMarker([40.383842, -111.681871],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_d0e074d3c947a7455d88d14414276704 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_29529efd53d97f713a17678111cf81f1 = $(`\u0026lt;div id=\u0026quot;html_29529efd53d97f713a17678111cf81f1\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84062\u0026lt;/div\u0026gt;`)[0];popup_d0e074d3c947a7455d88d14414276704.setContent(html_29529efd53d97f713a17678111cf81f1);circle_marker_cee100fae793abb33826abbdf78dac29.bindPopup(popup_d0e074d3c947a7455d88d14414276704);var circle_marker_1d8e4544a6b880ccc55647b3cecde12d = L.circleMarker([40.346286, -110.067282],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_3acdb8245db65b8675076c4171834fe0 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_6f7ae932749c211394741c2463f884e1 = $(`\u0026lt;div id=\u0026quot;html_6f7ae932749c211394741c2463f884e1\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84066\u0026lt;/div\u0026gt;`)[0];popup_3acdb8245db65b8675076c4171834fe0.setContent(html_6f7ae932749c211394741c2463f884e1);circle_marker_1d8e4544a6b880ccc55647b3cecde12d.bindPopup(popup_3acdb8245db65b8675076c4171834fe0);var circle_marker_ede95016a7b0809de35ec3e14f6663cd = L.circleMarker([40.465526, -109.510856],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_f1d347537fa0a897c704e9debea94b67 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_d9a7bff55a6fc4321b3dd1438d39a78e = $(`\u0026lt;div id=\u0026quot;html_d9a7bff55a6fc4321b3dd1438d39a78e\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84078\u0026lt;/div\u0026gt;`)[0];popup_f1d347537fa0a897c704e9debea94b67.setContent(html_d9a7bff55a6fc4321b3dd1438d39a78e);circle_marker_ede95016a7b0809de35ec3e14f6663cd.bindPopup(popup_f1d347537fa0a897c704e9debea94b67);var circle_marker_2f9b0ca3841fa4fefe9495d66f7f362c = L.circleMarker([39.530532, -110.810886],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_8ecd9ff4f183d1b75260f2eda8403953 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_cf768fd16fe3fdda45e5fbac51264dec = $(`\u0026lt;div id=\u0026quot;html_cf768fd16fe3fdda45e5fbac51264dec\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84501\u0026lt;/div\u0026gt;`)[0];popup_8ecd9ff4f183d1b75260f2eda8403953.setContent(html_cf768fd16fe3fdda45e5fbac51264dec);circle_marker_2f9b0ca3841fa4fefe9495d66f7f362c.bindPopup(popup_8ecd9ff4f183d1b75260f2eda8403953);var circle_marker_64605c2da177ceaa0407ed20758a7783 = L.circleMarker([38.517666, -109.385155],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_204e07e9207883df7beebac72149df68 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_aaa37815e2665b722043086e883957e4 = $(`\u0026lt;div id=\u0026quot;html_aaa37815e2665b722043086e883957e4\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84532\u0026lt;/div\u0026gt;`)[0];popup_204e07e9207883df7beebac72149df68.setContent(html_aaa37815e2665b722043086e883957e4);circle_marker_64605c2da177ceaa0407ed20758a7783.bindPopup(popup_204e07e9207883df7beebac72149df68);var circle_marker_16fa43fcd36964896f588fa1178a860c = L.circleMarker([37.527347, -109.411511],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_fc0730b29b6a78c5a3fb952c38fb9035 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_9dc61b48786b906e13a40a366a7bcb93 = $(`\u0026lt;div id=\u0026quot;html_9dc61b48786b906e13a40a366a7bcb93\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84511\u0026lt;/div\u0026gt;`)[0];popup_fc0730b29b6a78c5a3fb952c38fb9035.setContent(html_9dc61b48786b906e13a40a366a7bcb93);circle_marker_16fa43fcd36964896f588fa1178a860c.bindPopup(popup_fc0730b29b6a78c5a3fb952c38fb9035);var circle_marker_8f644d36a8570681d91c61295b9c54ca = L.circleMarker([38.590731, -111.800446],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_9d26cf4adedf85da11de0d5909884902 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_e0a717f684c647f15a2b951962925afb = $(`\u0026lt;div id=\u0026quot;html_e0a717f684c647f15a2b951962925afb\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84701\u0026lt;/div\u0026gt;`)[0];popup_9d26cf4adedf85da11de0d5909884902.setContent(html_e0a717f684c647f15a2b951962925afb);circle_marker_8f644d36a8570681d91c61295b9c54ca.bindPopup(popup_9d26cf4adedf85da11de0d5909884902);var circle_marker_cf84a750a01e26b879118a4c6a8f1788 = L.circleMarker([37.768677, -113.133595],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_fdbb9e3abd9166e5aa6d17e2bcc6ef61 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_4475d50061c1d6e8454dabf78bdb78dc = $(`\u0026lt;div id=\u0026quot;html_4475d50061c1d6e8454dabf78bdb78dc\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84721\u0026lt;/div\u0026gt;`)[0];popup_fdbb9e3abd9166e5aa6d17e2bcc6ef61.setContent(html_4475d50061c1d6e8454dabf78bdb78dc);circle_marker_cf84a750a01e26b879118a4c6a8f1788.bindPopup(popup_fdbb9e3abd9166e5aa6d17e2bcc6ef61);var circle_marker_105c885d6642a045c0157e00a0d78b5c = L.circleMarker([37.593409, -113.292337],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_23629a8a8d7aa9b0ce2ef2adcc0efa9e = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_d9724420c14c00f2f92029aff63b82b8 = $(`\u0026lt;div id=\u0026quot;html_d9724420c14c00f2f92029aff63b82b8\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84720\u0026lt;/div\u0026gt;`)[0];popup_23629a8a8d7aa9b0ce2ef2adcc0efa9e.setContent(html_d9724420c14c00f2f92029aff63b82b8);circle_marker_105c885d6642a045c0157e00a0d78b5c.bindPopup(popup_23629a8a8d7aa9b0ce2ef2adcc0efa9e);var circle_marker_bb1eb4523292aceacf62924b41f71b4d = L.circleMarker([40.040637, -111.419114],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_cdb137df2ec7c20fa6a2193ab938a7db = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_7c3687d6b229f9e593f1e8ab7c3dca88 = $(`\u0026lt;div id=\u0026quot;html_7c3687d6b229f9e593f1e8ab7c3dca88\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84660\u0026lt;/div\u0026gt;`)[0];popup_cdb137df2ec7c20fa6a2193ab938a7db.setContent(html_7c3687d6b229f9e593f1e8ab7c3dca88);circle_marker_bb1eb4523292aceacf62924b41f71b4d.bindPopup(popup_cdb137df2ec7c20fa6a2193ab938a7db);var circle_marker_ad163609bef4129fff4c8f5053516852 = L.circleMarker([40.292383, -111.928756],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_0b3f55356117dace493775e67eb56ee0 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_2ac475993a95f5cdf75530047eeba8bf = $(`\u0026lt;div id=\u0026quot;html_2ac475993a95f5cdf75530047eeba8bf\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84045\u0026lt;/div\u0026gt;`)[0];popup_0b3f55356117dace493775e67eb56ee0.setContent(html_2ac475993a95f5cdf75530047eeba8bf);circle_marker_ad163609bef4129fff4c8f5053516852.bindPopup(popup_0b3f55356117dace493775e67eb56ee0);var circle_marker_d453c3342ab39cc7d8dfad3721935790 = L.circleMarker([40.322736, -111.999426],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_cd73933a8bd7fb1cfb1fe5fc5017a434 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_f0b957b3bf6fdc201f030c47292ead6c = $(`\u0026lt;div id=\u0026quot;html_f0b957b3bf6fdc201f030c47292ead6c\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84005\u0026lt;/div\u0026gt;`)[0];popup_cd73933a8bd7fb1cfb1fe5fc5017a434.setContent(html_f0b957b3bf6fdc201f030c47292ead6c);circle_marker_d453c3342ab39cc7d8dfad3721935790.bindPopup(popup_cd73933a8bd7fb1cfb1fe5fc5017a434);var circle_marker_713c6fad4415e52f3731bf9179f99750 = L.circleMarker([40.411552, -111.87428],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_6ae368a17eaa765a594a63d22f030fa4 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_9a86da9cfa828e8ee970dfee51badc31 = $(`\u0026lt;div id=\u0026quot;html_9a86da9cfa828e8ee970dfee51badc31\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84043\u0026lt;/div\u0026gt;`)[0];popup_6ae368a17eaa765a594a63d22f030fa4.setContent(html_9a86da9cfa828e8ee970dfee51badc31);circle_marker_713c6fad4415e52f3731bf9179f99750.bindPopup(popup_6ae368a17eaa765a594a63d22f030fa4);var circle_marker_5e74ed6ff9be6401e1cd7790a30cf297 = L.circleMarker([40.487037, -112.099983],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_a882fa9143fd16a144f2ab1135e5b20c = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_e3c5b276bd097406455d27f66eeed086 = $(`\u0026lt;div id=\u0026quot;html_e3c5b276bd097406455d27f66eeed086\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84096\u0026lt;/div\u0026gt;`)[0];popup_a882fa9143fd16a144f2ab1135e5b20c.setContent(html_e3c5b276bd097406455d27f66eeed086);circle_marker_5e74ed6ff9be6401e1cd7790a30cf297.bindPopup(popup_a882fa9143fd16a144f2ab1135e5b20c);var circle_marker_0f48679e3bb71fe0ef543410de76113d = L.circleMarker([40.582074, -112.303592],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_b5f6e4d1fa39e23aef6d4caa0e7a2fbb = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_28f90b549562178d5cd3c7c870bda976 = $(`\u0026lt;div id=\u0026quot;html_28f90b549562178d5cd3c7c870bda976\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84074\u0026lt;/div\u0026gt;`)[0];popup_b5f6e4d1fa39e23aef6d4caa0e7a2fbb.setContent(html_28f90b549562178d5cd3c7c870bda976);circle_marker_0f48679e3bb71fe0ef543410de76113d.bindPopup(popup_b5f6e4d1fa39e23aef6d4caa0e7a2fbb);var circle_marker_6aa6f779fd97947eec22b60cf416c9ba = L.circleMarker([41.269519, -112.117658],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_e85474c1868d660d04fdbd0fceeb6613 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_5c90f284d2bcd1e29c634a03eb0d43ef = $(`\u0026lt;div id=\u0026quot;html_5c90f284d2bcd1e29c634a03eb0d43ef\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84404\u0026lt;/div\u0026gt;`)[0];popup_e85474c1868d660d04fdbd0fceeb6613.setContent(html_5c90f284d2bcd1e29c634a03eb0d43ef);circle_marker_6aa6f779fd97947eec22b60cf416c9ba.bindPopup(popup_e85474c1868d660d04fdbd0fceeb6613);var circle_marker_16a08440b60fc4e4ea3771168a115447 = L.circleMarker([41.584713, -112.051612],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_5265b61fea4c663e02d56c2f564f3fe9 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_44997e2f4038315bfeae539ead6f718a = $(`\u0026lt;div id=\u0026quot;html_44997e2f4038315bfeae539ead6f718a\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84302\u0026lt;/div\u0026gt;`)[0];popup_5265b61fea4c663e02d56c2f564f3fe9.setContent(html_44997e2f4038315bfeae539ead6f718a);circle_marker_16a08440b60fc4e4ea3771168a115447.bindPopup(popup_5265b61fea4c663e02d56c2f564f3fe9);var circle_marker_5b7ed6d92901b77700a88474e2e86c27 = L.circleMarker([41.823969, -111.883495],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_264ca07dd246e9062de035ad1273a727 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_ab0050a4bdf6d31dffcfac5900d8afea = $(`\u0026lt;div id=\u0026quot;html_ab0050a4bdf6d31dffcfac5900d8afea\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84335\u0026lt;/div\u0026gt;`)[0];popup_264ca07dd246e9062de035ad1273a727.setContent(html_ab0050a4bdf6d31dffcfac5900d8afea);circle_marker_5b7ed6d92901b77700a88474e2e86c27.bindPopup(popup_264ca07dd246e9062de035ad1273a727);var circle_marker_61c490c6b51b318d68220e8b8c1c6c8f = L.circleMarker([41.770678, -111.812392],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_bf77cb8c86a3ff5e66adbc5473d96a30 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_01592202b1c3b99139024487c94144ae = $(`\u0026lt;div id=\u0026quot;html_01592202b1c3b99139024487c94144ae\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84341\u0026lt;/div\u0026gt;`)[0];popup_bf77cb8c86a3ff5e66adbc5473d96a30.setContent(html_01592202b1c3b99139024487c94144ae);circle_marker_61c490c6b51b318d68220e8b8c1c6c8f.bindPopup(popup_bf77cb8c86a3ff5e66adbc5473d96a30);var circle_marker_f0b71784c8abe2ab3584bbdcb4f73922 = L.circleMarker([41.774813, -111.712761],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_8e677e5a89aeb2e4edbc93c4a7e0427a = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_73cade147fa04ea5c3cb903866a3a3a5 = $(`\u0026lt;div id=\u0026quot;html_73cade147fa04ea5c3cb903866a3a3a5\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84321\u0026lt;/div\u0026gt;`)[0];popup_8e677e5a89aeb2e4edbc93c4a7e0427a.setContent(html_73cade147fa04ea5c3cb903866a3a3a5);circle_marker_f0b71784c8abe2ab3584bbdcb4f73922.bindPopup(popup_8e677e5a89aeb2e4edbc93c4a7e0427a);var circle_marker_1b524eb621f64eacecee5c7fd6d2fe73 = L.circleMarker([40.756311, -111.899962],{\u0026quot;bubblingMouseEvents\u0026quot;: true, \u0026quot;color\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;dashArray\u0026quot;: null, \u0026quot;dashOffset\u0026quot;: null, \u0026quot;fill\u0026quot;: true, \u0026quot;fillColor\u0026quot;: \u0026quot;#3388ff\u0026quot;, \u0026quot;fillOpacity\u0026quot;: 0.9, \u0026quot;fillRule\u0026quot;: \u0026quot;evenodd\u0026quot;, \u0026quot;lineCap\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;lineJoin\u0026quot;: \u0026quot;round\u0026quot;, \u0026quot;opacity\u0026quot;: 1.0, \u0026quot;radius\u0026quot;: 4, \u0026quot;stroke\u0026quot;: true, \u0026quot;weight\u0026quot;: 3}).addTo(map_b7516fb67ae691c9c050f3812735db05);var popup_46211500d96b4bc5c691ee1b56c4bacb = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_a6f20c0c50b42c08ab30c98a167a50bc = $(`\u0026lt;div id=\u0026quot;html_a6f20c0c50b42c08ab30c98a167a50bc\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;ZCTA 84101\u0026lt;/div\u0026gt;`)[0];popup_46211500d96b4bc5c691ee1b56c4bacb.setContent(html_a6f20c0c50b42c08ab30c98a167a50bc);circle_marker_1b524eb621f64eacecee5c7fd6d2fe73.bindPopup(popup_46211500d96b4bc5c691ee1b56c4bacb);var marker_340209e352dfdbf6351da567df3a69dc = L.marker([40.756311, -111.899962],{}).addTo(map_b7516fb67ae691c9c050f3812735db05);var icon_a695d49dbf309cf193146b2a1827108a = L.AwesomeMarkers.icon({\u0026quot;markerColor\u0026quot;: \u0026quot;green\u0026quot;,\u0026quot;iconColor\u0026quot;: \u0026quot;white\u0026quot;,\u0026quot;icon\u0026quot;: \u0026quot;play\u0026quot;,\u0026quot;prefix\u0026quot;: \u0026quot;glyphicon\u0026quot;,\u0026quot;extraClasses\u0026quot;: \u0026quot;fa-rotate-0\u0026quot;,});var popup_4a660c8da65c0c9f2ef86281ffdda8a3 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_bd9eb576ac8d22679ef2c4a813e3fdd9 = $(`\u0026lt;div id=\u0026quot;html_bd9eb576ac8d22679ef2c4a813e3fdd9\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;Start (ZCTA 84101)\u0026lt;/div\u0026gt;`)[0];popup_4a660c8da65c0c9f2ef86281ffdda8a3.setContent(html_bd9eb576ac8d22679ef2c4a813e3fdd9);marker_340209e352dfdbf6351da567df3a69dc.bindPopup(popup_4a660c8da65c0c9f2ef86281ffdda8a3);marker_340209e352dfdbf6351da567df3a69dc.setIcon(icon_a695d49dbf309cf193146b2a1827108a);var marker_dd5efdc15cc4918a57b70568dcf7bbb5 = L.marker([40.756311, -111.899962],{}).addTo(map_b7516fb67ae691c9c050f3812735db05);var icon_cd40ce7959b2eb28561496ef4724bf0d = L.AwesomeMarkers.icon({\u0026quot;markerColor\u0026quot;: \u0026quot;red\u0026quot;,\u0026quot;iconColor\u0026quot;: \u0026quot;white\u0026quot;,\u0026quot;icon\u0026quot;: \u0026quot;stop\u0026quot;,\u0026quot;prefix\u0026quot;: \u0026quot;glyphicon\u0026quot;,\u0026quot;extraClasses\u0026quot;: \u0026quot;fa-rotate-0\u0026quot;,});var popup_09d4588a496e2c787e6aac20e125a718 = L.popup({\u0026quot;maxWidth\u0026quot;: \u0026quot;100%\u0026quot;,});var html_5a4b965bb08b18c635a93308b49554b9 = $(`\u0026lt;div id=\u0026quot;html_5a4b965bb08b18c635a93308b49554b9\u0026quot; style=\u0026quot;width: 100.0%; height: 100.0%;\u0026quot;\u0026gt;End (ZCTA 84101)\u0026lt;/div\u0026gt;`)[0];popup_09d4588a496e2c787e6aac20e125a718.setContent(html_5a4b965bb08b18c635a93308b49554b9);marker_dd5efdc15cc4918a57b70568dcf7bbb5.bindPopup(popup_09d4588a496e2c787e6aac20e125a718);marker_dd5efdc15cc4918a57b70568dcf7bbb5.setIcon(icon_cd40ce7959b2eb28561496ef4724bf0d);\u0026lt;/script\u0026gt;\u0026lt;/html\u0026gt;' width='100%' height='600px' onload='__resizeIframe(this)' frameborder='0'\u003E\u003C/iframe\u003E"}, "type": "data"}]}, {"code_hash": "1597cd4218d0618ed6b09083db576d16", "console": [], "id": "pHFh", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"as-you-can-see-the-route-matches-intutition\"\u003EAs you can see the route matches intutition.\u003C/h3\u003E\n\u003Ch3 id=\"there-are-of-course-several-things-you-could-do-to-tune-this-route-builder\"\u003EThere are of course several things you could do to tune this route builder\u003C/h3\u003E\n\u003Ch3 id=\"first-and-foremost-depending-on-empircale-data-you-might-opt-to-make-the-need_score-function-more-sophisticated-than-the-simple-product-of-population-and-distance\"\u003EFirst and foremost, depending on empircale data you might opt to make the need_score function more sophisticated than the simple product of population and distance\u003C/h3\u003E\n\u003Ch3 id=\"on-the-whole-though-this-is-a-robust-process-that-can-easily-be-adapted-to-any-other-state-or-even-the-entire-us-given-the-data-already-found-in-this-repo\"\u003EOn the whole though this is a robust process that can easily be adapted to any other state or even the entire US. Given the data already found in this repo.\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "a12dc89d43ff2354e3b7e7229ac471eb", "console": [], "id": "NCOB", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"this-is-what-you-need-to-know-to-get-the-osm-data-and-the-local-osmr-server-running\"\u003EThis is what you need to know to get the OSM data and the local OSMR server running.\u003C/h2\u003E\n\u003Ch2 id=\"if-you-have-cloned-the-repo-all-you-should-need-is-the-docker-image-and-to-start-the-server-otherwise-youll-need-to-download-the-osm-data\"\u003EIf you have cloned the repo all you should need is the Docker Image and to start the server. Otherwise, you'll need to download the OSM data.\u003C/h2\u003E\n\u003Ch3 id=\"to-get-the-environment-set-up-first-you-will-need-to-download-the-utah-osm-data\"\u003ETo get the environment set-up, first you will need to download the Utah OSM data:\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003Ebash: curl -L -o utah.osm.pbf \"\u003Ca href=\"https://download.geofabrik.de/north-america/us/utah-latest.osm.pbf\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://download.geofabrik.de/north-america/us/utah-latest.osm.pbf\u003C/a\u003E\"\u003C/span\u003E\n\u003Ch3 id=\"you-will-also-need-to-install-the-osrm-open-street-routing-machine-docker-image\"\u003EYou will also need to install the OSRM (Open Street Routing Machine) docker image:\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003Ebash: docker pull osrm/osrm-backend\u003C/span\u003E\n\u003Ch3 id=\"then-you-will-need-to-run-some-additional-commands-to-get-the-osrm-server-up-and-running-locally\"\u003EThen you will need to run some additional commands to get the OSRM server up and running locally:\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003E1) Extract for car profile\ndocker run -t -v $(pwd):/data osrm/osrm-backend osrm-extract -p /opt/car.lua /data/utah-latest.osm.pbf\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E3) Contract (build routing graph)\ndocker run -t -v $(pwd):/data osrm/osrm-backend osrm-contract /data/utah-latest.osrm\u003C/span\u003E\n\u003Ch3 id=\"finally-you-can-start-actually-running-the-server-with-this-command\"\u003EFinally, you can start actually running the server with this command:\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003Edocker run --platform=linux/amd64 -t -i -p 5001:5000 \\\n  -v \"$(pwd)\":/data osrm/osrm-backend \\\n  osrm-routed --algorithm=CH /data/utah.osrm\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}], "metadata": {"marimo_version": "0.17.6"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.17.6%22%0Aapp%20%3D%20marimo.App(width%3D%22medium%22)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20from%20__future__%20import%20annotations%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20import%20networkx%20as%20nx%0A%20%20%20%20import%20matplotlib.pyplot%20as%20plt%0A%20%20%20%20import%20pandas%20as%20pd%0A%20%20%20%20import%20requests%2C%20zipfile%2C%20io%0A%20%20%20%20import%20geopandas%20as%20gpd%0A%20%20%20%20import%20requests%0A%20%20%20%20import%20argparse%0A%20%20%20%20import%20csv%0A%20%20%20%20import%20json%0A%20%20%20%20import%20os%0A%20%20%20%20import%20re%0A%20%20%20%20import%20sys%0A%20%20%20%20from%20typing%20import%20Dict%2C%20List%2C%20Optional%2C%20Tuple%0A%20%20%20%20import%20pickle%0A%20%20%20%20import%20numpy%20as%20np%0A%20%20%20%20from%20sklearn.neighbors%20import%20BallTree%0A%20%20%20%20from%20pyvis.network%20import%20Network%0A%20%20%20%20from%20ortools.constraint_solver%20import%20pywrapcp%2C%20routing_enums_pb2%0A%20%20%20%20import%20folium%0A%20%20%20%20from%20pathlib%20import%20Path%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20BallTree%2C%0A%20%20%20%20%20%20%20%20Path%2C%0A%20%20%20%20%20%20%20%20folium%2C%0A%20%20%20%20%20%20%20%20mo%2C%0A%20%20%20%20%20%20%20%20np%2C%0A%20%20%20%20%20%20%20%20nx%2C%0A%20%20%20%20%20%20%20%20pd%2C%0A%20%20%20%20%20%20%20%20pickle%2C%0A%20%20%20%20%20%20%20%20pywrapcp%2C%0A%20%20%20%20%20%20%20%20requests%2C%0A%20%20%20%20%20%20%20%20routing_enums_pb2%2C%0A%20%20%20%20)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20To%20see%20the%20whole%20repository%20that%20made%20this%20notebook%20possible%20checkout%3A%0A%0A%20%20%20%20https%3A%2F%2Fgithub.com%2FTaylorBoan%2FCancer-Traveling-Salesman.git%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20Bio%20362%20Final%20Project%0A%20%20%20%20%23%23%20Taylor%20Rubalcava%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Cancer%20diagnosis%20and%20treatment%20are%20anything%20but%20trivial%2C%20requiring%20highly%20specialized%20equipment%20that%20many%20smaller%20hospitals%20simply%20don%E2%80%99t%20have%20on-site.%20This%20creates%20a%20serious%20problem%20for%20rural%20and%20less%20densely%20populated%20areas%2C%20where%20access%20to%20advanced%20imaging%20and%20diagnostic%20services%20is%20limited.%20Early%20detection%20of%20cancer%20is%20of%20paramount%20importance%2C%20yet%20many%20patients%20in%20these%20regions%20face%20long%20travel%20times%2C%20delayed%20screenings%2C%20and%20a%20reduced%20likelihood%20of%20receiving%20timely%20care.%0A%0A%20%20%20%20%23%23%23%20One%20solution%20used%20today%20is%20mobile%20cancer%20screening%20units%2C%20specialized%20vehicles%20equipped%20with%20mammography%2C%20ultrasound%2C%20CT%2C%20or%20lab%20capabilities%20that%20travel%20directly%20to%20underserved%20communities.%20These%20units%20bridge%20the%20geographic%20gap%20by%20bringing%20essential%20diagnostic%20technologies%20to%20patients%20instead%20of%20requiring%20patients%20to%20travel%20long%20distances%20to%20large%20medical%20centers.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Designing%20an%20effective%20route%20for%20these%20mobile%20screening%20units%20is%20far%20from%20straightforward.%20Rural%20populations%20are%20not%20only%20sparse%E2%80%94they%20are%20often%20geographically%20fragmented%2C%20separated%20by%20long%20distances%20and%20wide%20variations%20of%20local%20need%20and%20demand.%20An%20optimal%20route%20must%20balance%20clinical%20need%2C%20population%20density%2C%20travel%20time%2C%20and%20operational%20constraints%20of%20the%20mobile%20unit%20itself.%0A%0A%20%20%20%20%23%23%23%20Routing%20therefore%20becomes%20a%20logistics%20problem%20as%20much%20as%20a%20healthcare%20problem.%20How%20can%20we%20design%20a%20route%20that%20maximizes%20the%20number%20of%20at-risk%20individuals%20reached%2C%20minimizes%20idle%20travel%2C%20and%20ensures%20predictable%2C%20recurring%20access%20for%20communities%20that%20need%20it%20most%3F%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23Here%20we%20will%20explore%20how%20an%20optimal%20route%20can%20be%20calculated%20using%20available%20open-source%20software%20and%20data.%20To%20simplify%20our%20calculations%20we%20will%20make%20several%20assumptions%3A%0A%0A%20%20%20%201.%20We%20will%20only%20consder%20populations%20and%20hospitals%20found%20in%20Utah%0A%20%20%20%202.%20We%20will%20calculate%20the%20optimal%20route%20for%20a%20mobile%20unit%20only%20serving%20Utah%20residents%0A%20%20%20%203.%20We%20will%20only%20consder%20the%20need%20for%20lung%20cancer%20screening%20and%20the%20neccesary%20Low-Dose-CT%20machine%20needed.%20(LDCT)%0A%0A%20%20%20%20%23%23%23These%20assumptions%20will%20make%20our%20computational%20requirements%20more%20manageable%20while%20making%20it%20easy%20to%20expand%20our%20calculations%20after%20a%20proof%20of%20concept.%0A%0A%20%20%20%20We%20are%20focusing%20on%20Utah%20because%20that%20is%20where%20I%20live.%20We%20are%20focusing%20on%20lung%20cancer%20screening%20because%20not%20only%20is%20it%20one%20of%20the%20most%20deadly%20and%20common%20types%20of%20cancer%20but%20it%20is%20also%20the%20most%20difficult%20to%20screen%20for.%20Mobile%20LDCT%20buses%2Ftrailers%20(and%20LDCT%20machines%20themsevles)%20exist%20but%20they%20are%20rare%2C%20expensive%2C%20and%20as%20such%20the%20most%20in%20need%20of%20an%20optimal%20route.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20The%20most%20obvious%20model%20is%20an%20undirected%20graph%20with%20weighted%20nodes%20and%20edges.%20Each%20node%20will%20represent%20a%20populated%20area%20and%20each%20edge%20represents%20travel%20paths%20between%20cities.%20Each%20node's%20weight%20will%20be%20determined%20by%20it's%20population%20and%20access%20to%20local%20cancer%20screening%20facilities.%20Each%20edge's%20weight%20will%20be%20the%20time%20required%20to%20travel%20between%20those%20two%20cities.%20Once%20we%20have%20built%20our%20graph%20we%20can%20use%20it%20to%20solve%20our%20weighted%20traveling%20salesman%20problem%20(WTSP).%0A%0A%20%20%20%20%23%23%23%20In%20summary%20we%20need%3A%0A%20%20%20%201.%20Nodes%20(Locations%20we%20_could_%20visit)%0A%20%20%20%202.%20Nodes'%20weights%20(How%20much%20those%20places%20are%20in%20need%20of%20mobile%20screening)%0A%20%20%20%203.%20Edges%20(Paths%20between%20locations)%0A%20%20%20%204.%20Edges'%20weights%20(How%20long%20it%20takes%20to%20get%20between%20locations%2C%20a%20fair%20approximation%20of%20cost)%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20The%20first%20thing%20we%20need%20are%20the%20nodes%2C%20or%20possible%20locations.%20ZIP%20Code%20Tabulation%20Areas%20(ZCTAs)%20are%20widely%20used%20in%20healthcare%20access%20modeling%20and%20so%20that%20is%20what%20we%20will%20use%20here.%20Each%20ZCTA%20in%20Utah%20will%20be%20a%20possible%20node.%0A%0A%20%20%20%20I%20was%20able%20to%20find%20this%202023%20data%20containing%20a%20lat%20and%20lon%20point%20for%20each%20zip%20code%20in%20the%20United%20States%3A%0A%0A%20%20%20%20https%3A%2F%2Fwww2.census.gov%2Fgeo%2Fdocs%2Fmaps-data%2Fdata%2Fgazetteer%2F2023_Gazetteer%2F2023_Gaz_zcta_national.zip%0A%0A%20%20%20%20Here%20it%20is%2C%20%20as%20well%20as%20the%20interpretations%20for%20each%20column%3A%0A%20%20%20%20GEOID%20%3D%20Zip%20Code%20(Revelant%20to%20us)%0A%20%20%20%20ALAND%20%3D%20Area%20Land%0A%20%20%20%20AWATER%20%3D%20Area%20Water%0A%20%20%20%20ALAND_SQMI%20%3D%20Area%20Land%20by%20Square%20Mile%0A%20%20%20%20AWATER_SQMI%20%3D%20Area%20Water%20by%20Square%20Mile%0A%20%20%20%20INTPTLAT%20%3D%20Internal%20Point%20Latitude%0A%20%20%20%20INTPTLONG%20%3D%20Internal%20Point%20Longitude%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20zcta_nation%20%3D%20pd.read_csv(%22.%2Fzcta_national.txt%22)%0A%20%20%20%20zcta_nation.head(10)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Nodes%20%E2%9C%85%0A%20%20%20%20%23%23%23%20I%20also%20found%20this%20census%20data%20that%20has%20the%20population%20for%20each%20zip%20code%0A%20%20%20%20https%3A%2F%2Fapi.census.gov%2Fdata%2F2023%2Facs%2Facs5%3Fget%3DNAME%2CB01003_001E%26for%3Dzip%2520code%2520tabulation%2520area%3A*%0A%20%20%20%20%23%23%23%20We%20will%20eventually%20need%20this%20for%20our%20node%20weights%20calculation.%0A%20%20%20%20%23%23%23%20Unfortunately%2C%20neither%20of%20these%20links%20lead%20to%20clean%20.csv%20data.%20The%20script%20that%20read%2C%20cleaned%2C%20and%20merged%20these%20two%20pieces%20of%20data%20is%20found%20in%20build_utah_zctas.py.%20This%20resulted%20in%20this%20csv%20file%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20merged_zcta%20%3D%20pd.read_csv(%22.%2Fzcta_merged.csv%22)%0A%20%20%20%20merged_zcta.head(10)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Which%20I%20then%20manually%20filtered%20and%20cleaned%20to%20Utah%20only%20Zip%20Codes%2FGEOIDs%20while%20inspecting%20it%20in%20Numbers%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20utah_zcta%20%3D%20pd.read_csv(%22.%2Futah_zctas.csv%22)%0A%20%20%20%20utah_zcta.head(10)%0A%20%20%20%20print(len(utah_zcta))%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Now%20we%20have%20the%20nodes%20and%20their%20populations.%20This%20is%20enough%20to%20begin%20building%20the%20graph.%0A%0A%20%20%20%20%23%23%23%20We%20could%20simply%20connect%20every%20node%20to%20every%20other%20node%2C%20but%20that%20would%20be%20an%20inefficient%20N%5E2%20graph%20with%20~88k%20edges.%20Ideally%2C%20we%20only%20connect%20nodes%2Fzip%20codes%20to%20their%20neighboring%20nodes%2Fzipcodes.%20We%20will%20use%20the%20K-Nearest%20Neighbors%20(KNN)%20algorithm%20to%20determine%20edge%20locations.%0A%0A%20%20%20%20%23%23%23%20We%20also%20need%20to%20determine%20the%20weights%20for%20those%20edges.%20The%20weight%20for%20any%20given%20edge%20is%20how%20long%20it%20takes%20to%20drive%20between%20the%20two%20nodes%2Fzip%20codes%20that%20edge%20connects.%20Unfortunately%20the%20Google%20Maps%20API%20is%20paid%20and%20requires%20API%20Keys.%20Instead%20I%20will%20use%20Open%20Street%20Maps%20and%20Open%20Street%20Maps%20and%20Open%20Source%20Routing%20Machine.%20OSM%20and%20OSRM%20respectively.%20To%20do%20this%20I%20had%20to%20download%20the%20OSM%20data%20for%20Utah%20and%20set%20up%20a%20local%20OSMR%20server.%0A%0A%20%20%20%20%23%23%23%20In%20summary%20we%20will%20use%3A%0A%20%20%20%201.%20Sklearn%20to%20find%20each%20nodes%20k%20nearest%20neighbors%20%2F%20edges%0A%20%20%20%202.%20OSMR%20to%20get%20the%20travel%20time%2Fweights%20for%20each%20of%20those%20edges%0A%20%20%20%203.%20NetworkX%20to%20create%20the%20graph%20including%20the%20nodes%2C%20edges%2C%20and%20edge%20weights%0A%0A%20%20%20%20Note%2C%20that%20in%20order%20for%20the%20following%20code%20to%20work%20the%20OSMR%20server%20must%20be%20running%20on%20port%205001%0A%20%20%20%20These%20are%20the%20commands%20that%20I%20used%20to%20download%20the%20neccesary%20OSM%20data%20and%20start%20the%20OSMR%20server%3A%0A%0A%20%20%20%20*%20For%20more%20detailsa%20about%20how%20to%20setup%20this%20server%20locally%20see%20the%20bottom%20of%20this%20notebook%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(BallTree%2C%20np%2C%20nx%2C%20pd%2C%20pickle%2C%20requests)%3A%0A%20%20%20%20OSRM_BASE%20%3D%20%22http%3A%2F%2Flocalhost%3A5001%22%0A%0A%20%20%20%20INPUT_CSV%20%3D%20%22utah_zctas.csv%22%0A%20%20%20%20OUTPUT_EDGES_CSV%20%3D%20%22utah_edges.csv%22%0A%20%20%20%20OUTPUT_GRAPH_PKL%20%3D%20%22utah_graph.gpickle%22%0A%20%20%20%20K_NEIGHBORS%20%3D%206%20%20%23%20neighbors%20per%20node%0A%0A%0A%20%20%20%20def%20load_zctas(path%3A%20str)%20-%3E%20pd.DataFrame%3A%0A%20%20%20%20%20%20%20%20df%20%3D%20pd.read_csv(path)%0A%0A%20%20%20%20%20%20%20%20cols%20%3D%20%7Bc.lower()%3A%20c%20for%20c%20in%20df.columns%7D%0A%0A%20%20%20%20%20%20%20%20%23%20Handle%20both%20original%20and%20cleaned%20forms%0A%20%20%20%20%20%20%20%20if%20%22geoid%22%20in%20cols%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20df.rename(columns%3D%7Bcols%5B%22geoid%22%5D%3A%20%22zcta%22%7D%2C%20inplace%3DTrue)%0A%20%20%20%20%20%20%20%20elif%20%22zcta%22%20not%20in%20df.columns%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(%22Could%20not%20find%20GEOID%20or%20zcta%20column%20in%20CSV%22)%0A%0A%20%20%20%20%20%20%20%20if%20%22intptlat%22%20in%20cols%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20df.rename(columns%3D%7Bcols%5B%22intptlat%22%5D%3A%20%22lat%22%7D%2C%20inplace%3DTrue)%0A%20%20%20%20%20%20%20%20if%20%22intptlong%22%20in%20cols%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20df.rename(columns%3D%7Bcols%5B%22intptlong%22%5D%3A%20%22lon%22%7D%2C%20inplace%3DTrue)%0A%0A%20%20%20%20%20%20%20%20%23%20Ensure%20required%20columns%0A%20%20%20%20%20%20%20%20for%20col%20in%20%5B%22zcta%22%2C%20%22lat%22%2C%20%22lon%22%2C%20%22population%22%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20col%20not%20in%20df.columns%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(f%22Missing%20required%20column%3A%20%7Bcol%7D%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Keep%20only%20Utah%20ZCTAs%20(84xxx)%0A%20%20%20%20%20%20%20%20df%5B%22zcta%22%5D%20%3D%20df%5B%22zcta%22%5D.astype(str)%0A%20%20%20%20%20%20%20%20df%20%3D%20df%5Bdf%5B%22zcta%22%5D.str.startswith(%2284%22)%5D.copy()%0A%0A%20%20%20%20%20%20%20%20df%5B%22lat%22%5D%20%3D%20df%5B%22lat%22%5D.astype(float)%0A%20%20%20%20%20%20%20%20df%5B%22lon%22%5D%20%3D%20df%5B%22lon%22%5D.astype(float)%0A%20%20%20%20%20%20%20%20df%5B%22population%22%5D%20%3D%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20pd.to_numeric(df%5B%22population%22%5D%2C%20errors%3D%22coerce%22).fillna(0).astype(int)%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20df%20%3D%20df.reset_index(drop%3DTrue)%0A%20%20%20%20%20%20%20%20return%20df%0A%0A%0A%20%20%20%20def%20build_knn_edges(df%3A%20pd.DataFrame%2C%20k%3A%20int)%20-%3E%20list%5Btuple%5Bint%2C%20int%5D%5D%3A%0A%20%20%20%20%20%20%20%20%22%22%22Return%20list%20of%20undirected%20edges%20as%20index%20pairs%20(i%2C%20j).%22%22%22%0A%20%20%20%20%20%20%20%20coords%20%3D%20np.radians(df%5B%5B%22lat%22%2C%20%22lon%22%5D%5D.values)%20%20%23%20expects%20radians%0A%20%20%20%20%20%20%20%20tree%20%3D%20BallTree(coords%2C%20metric%3D%22haversine%22)%0A%0A%20%20%20%20%20%20%20%20%23%20%2B1%20because%20the%20nearest%20neighbor%20is%20itself%0A%20%20%20%20%20%20%20%20distances%2C%20indices%20%3D%20tree.query(coords%2C%20k%3Dk%20%2B%201)%0A%0A%20%20%20%20%20%20%20%20edge_set%20%3D%20set()%0A%0A%20%20%20%20%20%20%20%20n%20%3D%20len(df)%0A%20%20%20%20%20%20%20%20for%20i%20in%20range(n)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20j_idx%20in%20indices%5Bi%5D%5B1%3A%5D%3A%20%20%23%20skip%20itself%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20%3D%20int(j_idx)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20u%2C%20v%20%3D%20sorted((i%2C%20j))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20edge_set.add((u%2C%20v))%0A%0A%20%20%20%20%20%20%20%20edges%20%3D%20list(edge_set)%0A%20%20%20%20%20%20%20%20print(f%22KNN%20created%20%7Blen(edges)%7D%20unique%20edges%20for%20%7Bn%7D%20nodes%22)%0A%20%20%20%20%20%20%20%20return%20edges%0A%0A%0A%20%20%20%20def%20osrm_travel_time_minutes(lat1%2C%20lon1%2C%20lat2%2C%20lon2)%20-%3E%20float%3A%0A%20%20%20%20%20%20%20%20%22%22%22Get%20driving%20time%20in%20minutes%20via%20OSRM.%22%22%22%0A%20%20%20%20%20%20%20%20url%20%3D%20f%22%7BOSRM_BASE%7D%2Froute%2Fv1%2Fdriving%2F%7Blon1%7D%2C%7Blat1%7D%3B%7Blon2%7D%2C%7Blat2%7D%3Foverview%3Dfalse%22%0A%20%20%20%20%20%20%20%20r%20%3D%20requests.get(url)%0A%20%20%20%20%20%20%20%20r.raise_for_status()%0A%20%20%20%20%20%20%20%20data%20%3D%20r.json()%0A%0A%20%20%20%20%20%20%20%20if%20data.get(%22code%22)%20!%3D%20%22Ok%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%20RuntimeError(f%22OSRM%20error%3A%20%7Bdata%7D%22)%0A%0A%20%20%20%20%20%20%20%20secs%20%3D%20data%5B%22routes%22%5D%5B0%5D%5B%22duration%22%5D%0A%20%20%20%20%20%20%20%20return%20secs%20%2F%2060.0%0A%0A%0A%20%20%20%20def%20build_graph(df%3A%20pd.DataFrame%2C%20edges_idx%3A%20list%5Btuple%5Bint%2C%20int%5D%5D)%20-%3E%20nx.Graph%3A%0A%20%20%20%20%20%20%20%20G%20%3D%20nx.Graph()%0A%0A%20%20%20%20%20%20%20%20%23%20Add%20nodes%20with%20attributes%0A%20%20%20%20%20%20%20%20for%20i%2C%20row%20in%20df.iterrows()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20G.add_node(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20row%5B%22zcta%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lat%3Drow%5B%22lat%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lon%3Drow%5B%22lon%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20population%3Dint(row%5B%22population%22%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%23%20Add%20edges%20with%20travel_time_min%0A%20%20%20%20%20%20%20%20edge_rows%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20for%20count%2C%20(i%2C%20j)%20in%20enumerate(edges_idx%2C%20start%3D1)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%3D%20df.iloc%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20df.iloc%5Bj%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t_min%20%3D%20osrm_travel_time_minutes(a%5B%22lat%22%5D%2C%20a%5B%22lon%22%5D%2C%20b%5B%22lat%22%5D%2C%20b%5B%22lon%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22OSRM%20failed%20for%20%7Ba%5B'zcta'%5D%7D%20%E2%80%93%20%7Bb%5B'zcta'%5D%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20G.add_edge(a%5B%22zcta%22%5D%2C%20b%5B%22zcta%22%5D%2C%20travel_time_min%3Dt_min)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20edge_rows.append(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22zcta_u%22%3A%20a%5B%22zcta%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22zcta_v%22%3A%20b%5B%22zcta%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22travel_time_min%22%3A%20t_min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20count%20%25%2050%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Processed%20%7Bcount%7D%2F%7Blen(edges_idx)%7D%20edges...%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Be%20nice%20to%20OSRM%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20time.sleep(0.005)%0A%0A%20%20%20%20%20%20%20%20edges_df%20%3D%20pd.DataFrame(edge_rows)%0A%20%20%20%20%20%20%20%20return%20G%2C%20edges_df%0A%0A%0A%20%20%20%20def%20main()%3A%0A%20%20%20%20%20%20%20%20print(%22Loading%20ZCTAs...%22)%0A%20%20%20%20%20%20%20%20df%20%3D%20load_zctas(INPUT_CSV)%0A%20%20%20%20%20%20%20%20print(f%22Loaded%20%7Blen(df)%7D%20Utah%20ZCTAs%22)%0A%0A%20%20%20%20%20%20%20%20print(%22Building%20KNN%20edges...%22)%0A%20%20%20%20%20%20%20%20edges_idx%20%3D%20build_knn_edges(df%2C%20K_NEIGHBORS)%0A%0A%20%20%20%20%20%20%20%20print(%22Querying%20OSRM%20and%20building%20graph...%22)%0A%20%20%20%20%20%20%20%20G%2C%20edges_df%20%3D%20build_graph(df%2C%20edges_idx)%0A%0A%20%20%20%20%20%20%20%20print(f%22Graph%20has%20%7BG.number_of_nodes()%7D%20nodes%20and%20%7BG.number_of_edges()%7D%20edges%22)%0A%0A%20%20%20%20%20%20%20%20print(f%22Saving%20edges%20to%20%7BOUTPUT_EDGES_CSV%7D%20...%22)%0A%20%20%20%20%20%20%20%20edges_df.to_csv(OUTPUT_EDGES_CSV%2C%20index%3DFalse)%0A%0A%20%20%20%20%20%20%20%20print(f%22Saving%20graph%20to%20%7BOUTPUT_GRAPH_PKL%7D%20...%22)%0A%20%20%20%20%20%20%20%20with%20open(OUTPUT_GRAPH_PKL%2C%20%22wb%22)%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20pickle.dump(G%2C%20f)%0A%0A%20%20%20%20%20%20%20%20print(%22Done.%22)%0A%0A%0A%20%20%20%20if%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20%20%20%20%20main()%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20We%20now%20have%20the%20whole%20graph%20minus%20the%20node%20weights.%20To%20determine%20the%20node%20weights%20we%20will%20need%20to%20know%20the%20population%20of%20each%20zip%20code%20_and_%20the%20distance%20to%20the%20nearest%20LCDT%20machine.%0A%0A%20%20%20%20%23%23%23%20We%20already%20have%20the%20population%20data.%20We%20need%20to%20retrieve%20the%20location%20of%20every%20hospital%20in%20Utah%20that%20has%20a%20LCDT%20machines%20and%20thus%20lung%20cancer%20screening%20capabilities.%20This%20information%20is%20tracked%20by%20the%20government%20via%20their%20%22Centers%20for%20Medicare%20%26%20Medicaid%20services%22%20website%3A%0A%0A%20%20%20%20https%3A%2F%2Fdata.cms.gov%2Fprovider-summary-by-type-of-service%2Fmedicare-physician-other-practitioners%0A%0A%20%20%20%20%23%23%23%20Let's%20take%20a%20look%20at%20it%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20LCDT_hospitals%20%3D%20pd.read_csv(%22.%2FLDCT_hospitals.csv%22)%0A%20%20%20%20LCDT_hospitals.head(10)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20As%20you%20can%20see%2C%20this%20CSV%20contains%20a%20row%20for%20every%20hospital%20with%20LDCT%20machine%20in%20the%20US%20with%20its%20zip%20code%20and%20address.%0A%0A%20%20%20%20%23%23%23%20I%20pre-filtered%20the%20CSV%20file%20from%20the%20CMS%20website%20to%20only%20include%20hospitals%20with%20the%2071271%20code%20which%20is%20the%20Medicare%2FMedicaid%20code%20for%20LDCT%20screenings%2C%20according%20to%20their%20website%3A%0A%0A%20%20%20%20https%3A%2F%2Fwww.cms.gov%2Fmedicare-coverage-database%2Fview%2Farticle.aspx%3Farticleid%3D58641%0A%0A%20%20%20%20While%20inspecting%20the%20data%20I%20manually%20cleaned%20by%20removing%20everything%20except%20for%20UT%20hospitals%20and%20their%20zip%20codes%20this%20to%20get%20to%20the%20following%20dataframe%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20LDCT_utah_hospitals_zcta%20%3D%20pd.read_csv(%22.%2FLDCT_utah_hospitals_zcta.csv%22)%0A%20%20%20%20LDCT_utah_hospitals_zcta.head(100)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20These%20are%20the%20zipcodes%20in%20Utah%20that%20have%20LDCT%20machines.%20We%20now%20have%20everything%20we%20need%20to%20determine%20the%20node%20weights.%0A%0A%20%20%20%20%23%23%23%20Node%20Weight%20%3D%20%22The%20travel%20time%20from%20this%20node%2Fzip%20code%20to%20the%20nearest%20node%2Fzip%20code%20with%20a%20LDCT%20machine%22%0A%0A%20%20%20%20%23%23%23%20This%20is%20computed%20using%20Dijkstra's%20Algorithm%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(nx%2C%20pd%2C%20pickle)%3A%0A%20%20%20%20UTAH_ZCTAS_CSV%20%3D%20%22utah_zctas.csv%22%0A%20%20%20%20GRAPH_PKL%20%3D%20%22utah_graph.gpickle%22%0A%20%20%20%20LDCT_ZCTAS_CSV%20%3D%20%22LDCT_utah_hospitals_zcta.csv%22%0A%20%20%20%20OUTPUT_ACCESS_CSV%20%3D%20%22utah_ldct_access.csv%22%0A%0A%20%20%20%20def%20load_graph(path%3A%20str)%3A%0A%20%20%20%20%20%20%20%20with%20open(path%2C%20%22rb%22)%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20G%20%3D%20pickle.load(f)%0A%20%20%20%20%20%20%20%20if%20not%20isinstance(G%2C%20nx.Graph)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%20TypeError(%22Loaded%20object%20is%20not%20a%20NetworkX%20Graph%22)%0A%20%20%20%20%20%20%20%20return%20G%0A%0A%20%20%20%20%23%20Load%20node%20metadata%0A%20%20%20%20zctas%20%3D%20pd.read_csv(UTAH_ZCTAS_CSV)%0A%20%20%20%20%23%20Normalize%0A%20%20%20%20if%20%22GEOID%22%20in%20zctas.columns%20and%20%22zcta%22%20not%20in%20zctas.columns%3A%0A%20%20%20%20%20%20%20%20zctas%20%3D%20zctas.rename(columns%3D%7B%22GEOID%22%3A%20%22zcta%22%7D)%0A%20%20%20%20if%20%22INTPTLAT%22%20in%20zctas.columns%20and%20%22lat%22%20not%20in%20zctas.columns%3A%0A%20%20%20%20%20%20%20%20zctas%20%3D%20zctas.rename(columns%3D%7B%22INTPTLAT%22%3A%20%22lat%22%7D)%0A%20%20%20%20if%20%22INTPTLONG%22%20in%20zctas.columns%20and%20%22lon%22%20not%20in%20zctas.columns%3A%0A%20%20%20%20%20%20%20%20zctas%20%3D%20zctas.rename(columns%3D%7B%22INTPTLONG%22%3A%20%22lon%22%7D)%0A%0A%20%20%20%20zctas%5B%22zcta%22%5D%20%3D%20zctas%5B%22zcta%22%5D.astype(str).str.zfill(5)%0A%0A%20%20%20%20%23%20Load%20graph%0A%20%20%20%20print(%22Loading%20graph...%22)%0A%20%20%20%20G%20%3D%20load_graph(GRAPH_PKL)%0A%20%20%20%20print(f%22Graph%20has%20%7BG.number_of_nodes()%7D%20nodes%2C%20%7BG.number_of_edges()%7D%20edges%22)%0A%0A%20%20%20%20%23%20Load%20LDCT%20ZCTAs%0A%20%20%20%20ldct_df%20%3D%20pd.read_csv(LDCT_ZCTAS_CSV)%0A%20%20%20%20ldct_df%5B%22zcta%22%5D%20%3D%20ldct_df%5B%22zcta%22%5D.astype(str).str.zfill(5)%0A%0A%20%20%20%20%23%20Restrict%20LDCT%20list%20to%20nodes%20actually%20present%20in%20graph%0A%20%20%20%20ldct_nodes%20%3D%20%5Bz%20for%20z%20in%20ldct_df%5B%22zcta%22%5D%20if%20z%20in%20G.nodes%5D%0A%20%20%20%20if%20not%20ldct_nodes%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22No%20LDCT%20ZCTAs%20matched%20nodes%20in%20the%20graph.%22)%0A%0A%20%20%20%20print(f%22Using%20%7Blen(ldct_nodes)%7D%20LDCT%20source%20nodes%22)%0A%0A%20%20%20%20%23%20Multi-source%20Dijkstra%3A%20shortest%20travel_time_min%20to%20any%20LDCT%20node%0A%20%20%20%20%23%20Returns%20dict%3A%20%7Bnode%3A%20distance%7D%0A%20%20%20%20dist%20%3D%20nx.multi_source_dijkstra_path_length(%0A%20%20%20%20%20%20%20%20G%2C%20sources%3Dldct_nodes%2C%20weight%3D%22travel_time_min%22%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20Build%20result%20frame%0A%20%20%20%20zctas%5B%22travel_time_to_ldct_min%22%5D%20%3D%20zctas%5B%22zcta%22%5D.map(dist)%0A%0A%20%20%20%20%23%20Some%20ZCTAs%20might%20be%20disconnected%3B%20mark%20them%20as%20NaN%0A%20%20%20%20%23%20Compute%20a%20simple%20need%20score%0A%20%20%20%20zctas%5B%22need_score%22%5D%20%3D%20zctas%5B%22population%22%5D%20*%20zctas%5B%22travel_time_to_ldct_min%22%5D%0A%0A%20%20%20%20%23%20Sort%20by%20need%0A%20%20%20%20out%20%3D%20zctas.sort_values(%22need_score%22%2C%20ascending%3DFalse)%0A%0A%20%20%20%20out.to_csv(OUTPUT_ACCESS_CSV%2C%20index%3DFalse)%0A%20%20%20%20print(f%22Saved%20%7BOUTPUT_ACCESS_CSV%7D%22)%0A%20%20%20%20%23%20print(out%5B%5B%22zcta%22%2C%20%22population%22%2C%20%22travel_time_to_ldct_min%22%2C%20%22need_score%22%5D%5D.head(20))%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20utah_ldct_access%20%3D%20pd.read_csv(%22.%2Futah_ldct_access.csv%22)%0A%20%20%20%20utah_ldct_access.head(100)%0A%20%20%20%20return%20(utah_ldct_access%2C)%0A%0A%0A%40app.cell%0Adef%20_(utah_ldct_access)%3A%0A%20%20%20%20%23%20Top%2020%20by%20need_score%0A%20%20%20%20top_need%20%3D%20utah_ldct_access.sort_values(%22need_score%22%2C%20ascending%3DFalse).head(20)%0A%20%20%20%20print(top_need%5B%5B%22zcta%22%2C%20%22population%22%2C%20%22travel_time_to_ldct_min%22%2C%20%22need_score%22%5D%5D)%0A%0A%20%20%20%20%23%20How%20many%20ZCTAs%20are%20missing%20access%20(no%20path)%3F%0A%20%20%20%20print(%22%5Cn%22)%0A%20%20%20%20print(%22NaN%20travel%20time%3A%22%2C%20utah_ldct_access%5B%22travel_time_to_ldct_min%22%5D.isna().sum())%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20These%20are%20the%2020%20nodes%2Fzip%20code%20that%20would%20benefit%20the%20most%20from%20a%20mobile%20LDCT%20visit.%20Obviously%20the%20number%20of%20zip%20codes%20that%20could%20actually%20be%20visited%20would%20be%20dependent%20on%20the%20resource%20constraints%20on%20the%20particular%20mobile%20LDCT%20unit%2C%20but%20I%20thought%20that%2020%20would%20be%20sufficient%20to%20present%20a%20proof%20of%20concept.%0A%0A%20%20%20%20%23%23%23%20The%20last%20thing%20left%20to%20do%20is%20actually%20calculate%20the%20optimal%20path%20to%20these%2020%20zip%20codes%2C%20given%20the%20edges%20(and%20weights)%20of%20our%20graph.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(nx%2C%20pd%2C%20pickle%2C%20pywrapcp%2C%20routing_enums_pb2)%3A%0A%20%20%20%20def%20_()%3A%0A%20%20%20%20%20%20%20%20def%20solve_tsp(distance_matrix%2C%20start_index)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22Solve%20TSP%20using%20OR-Tools.%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20n%20%3D%20len(distance_matrix)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%201%20vehicle%2C%20depot%20at%20start_index%0A%20%20%20%20%20%20%20%20%20%20%20%20manager%20%3D%20pywrapcp.RoutingIndexManager(n%2C%201%2C%20start_index)%0A%20%20%20%20%20%20%20%20%20%20%20%20routing%20%3D%20pywrapcp.RoutingModel(manager)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20def%20cost_callback(from_index%2C%20to_index)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20manager.IndexToNode(from_index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20manager.IndexToNode(to_index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20distance_matrix%5Bf%5D%5Bt%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20transit_callback_idx%20%3D%20routing.RegisterTransitCallback(cost_callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20routing.SetArcCostEvaluatorOfAllVehicles(transit_callback_idx)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Search%20parameters%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters%20%3D%20pywrapcp.DefaultRoutingSearchParameters()%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters.first_solution_strategy%20%3D%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20routing_enums_pb2.FirstSolutionStrategy.PATH_CHEAPEST_ARC%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Optional%3A%20add%20a%20bit%20of%20local%20search%20for%20better%20routes%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters.local_search_metaheuristic%20%3D%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20routing_enums_pb2.LocalSearchMetaheuristic.GUIDED_LOCAL_SEARCH%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters.time_limit.seconds%20%3D%2030%20%20%23%2030%20seconds%20search%20time%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20solution%20%3D%20routing.SolveWithParameters(search_parameters)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20solution%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20RuntimeError(%22No%20solution%20found%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Extract%20route%20as%20list%20of%20node%20indices%20(0..n-1)%0A%20%20%20%20%20%20%20%20%20%20%20%20route%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20routing.Start(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20not%20routing.IsEnd(index)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20manager.IndexToNode(index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20route.append(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20solution.Value(routing.NextVar(index))%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Add%20final%20depot%20(so%20route%20starts%20and%20ends%20at%20SLC)%0A%20%20%20%20%20%20%20%20%20%20%20%20route.append(manager.IndexToNode(index))%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20route%0A%0A%0A%20%20%20%20%20%20%20%20GRAPH_PKL%20%3D%20%22utah_graph.gpickle%22%0A%20%20%20%20%20%20%20%20NEED_SCORE_CSV%20%3D%20%22utah_ldct_access.csv%22%0A%20%20%20%20%20%20%20%20START_ZCTA%20%3D%20%2284101%22%20%20%23%20Salt%20Lake%20City%20downtown%20(can%20change)%0A%0A%20%20%20%20%20%20%20%20%23%20How%20many%20top%20sites%20to%20route%20(use%20your%20existing%20list)%0A%20%20%20%20%20%20%20%20TOP_N%20%3D%2021%0A%0A%0A%20%20%20%20%20%20%20%20def%20load_graph()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20with%20open(GRAPH_PKL%2C%20%22rb%22)%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20G%20%3D%20pickle.load(f)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20G%0A%0A%0A%20%20%20%20%20%20%20%20def%20build_distance_matrix(G%2C%20nodes)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22Compute%20pairwise%20travel%20times%20(in%20minutes)%20for%20TSP.%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20n%20%3D%20len(nodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20dist%20%3D%20%5B%5B0%5D%20*%20n%20for%20_%20in%20range(n)%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20a%20in%20enumerate(nodes)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20j%2C%20b%20in%20enumerate(nodes)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20i%20%3D%3D%20j%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dist%5Bi%5D%5Bj%5D%20%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Use%20your%20graph's%20edge%20weights%20(multi-hop%20shortest%20path)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20nx.shortest_path_length(G%2C%20a%2C%20b%2C%20weight%3D%22travel_time_min%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dist%5Bi%5D%5Bj%5D%20%3D%20int(t)%20%20%23%20OR-Tools%20requires%20integers%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20dist%0A%0A%0A%20%20%20%20%20%20%20%20def%20solve_tsp(distance_matrix%2C%20start_index)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22Solve%20TSP%20using%20OR-Tools.%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20n%20%3D%20len(distance_matrix)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%201%20vehicle%2C%20depot%20at%20start_index%0A%20%20%20%20%20%20%20%20%20%20%20%20manager%20%3D%20pywrapcp.RoutingIndexManager(n%2C%201%2C%20start_index)%0A%20%20%20%20%20%20%20%20%20%20%20%20routing%20%3D%20pywrapcp.RoutingModel(manager)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20def%20cost_callback(from_index%2C%20to_index)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20manager.IndexToNode(from_index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20manager.IndexToNode(to_index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20distance_matrix%5Bf%5D%5Bt%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20transit_callback_idx%20%3D%20routing.RegisterTransitCallback(cost_callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20routing.SetArcCostEvaluatorOfAllVehicles(transit_callback_idx)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Search%20parameters%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters%20%3D%20pywrapcp.DefaultRoutingSearchParameters()%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters.first_solution_strategy%20%3D%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20routing_enums_pb2.FirstSolutionStrategy.PATH_CHEAPEST_ARC%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Add%20a%20bit%20of%20local%20search%20for%20better%20routes%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters.local_search_metaheuristic%20%3D%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20routing_enums_pb2.LocalSearchMetaheuristic.GUIDED_LOCAL_SEARCH%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20search_parameters.time_limit.seconds%20%3D%2030%20%20%23%2030%20seconds%20search%20time%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20solution%20%3D%20routing.SolveWithParameters(search_parameters)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20solution%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20RuntimeError(%22No%20solution%20found%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Extract%20route%20as%20list%20of%20node%20indices%20(0..n-1)%0A%20%20%20%20%20%20%20%20%20%20%20%20route%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20routing.Start(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20not%20routing.IsEnd(index)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20manager.IndexToNode(index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20route.append(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20solution.Value(routing.NextVar(index))%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Add%20final%20depot%20(so%20route%20starts%20and%20ends%20at%20SLC)%0A%20%20%20%20%20%20%20%20%20%20%20%20route.append(manager.IndexToNode(index))%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20route%0A%0A%0A%0A%20%20%20%20%20%20%20%20print(%22Loading%20graph...%22)%0A%20%20%20%20%20%20%20%20G%20%3D%20load_graph()%0A%0A%20%20%20%20%20%20%20%20print(%22Loading%20need-score%20data...%22)%0A%20%20%20%20%20%20%20%20df%20%3D%20pd.read_csv(NEED_SCORE_CSV)%0A%20%20%20%20%20%20%20%20df%5B%22zcta%22%5D%20%3D%20df%5B%22zcta%22%5D.astype(str)%0A%0A%20%20%20%20%20%20%20%20%23%20Select%20top%20N%20highest-need%20ZCTAs%0A%20%20%20%20%20%20%20%20top%20%3D%20df.sort_values(%22need_score%22%2C%20ascending%3DFalse).head(TOP_N)%0A%20%20%20%20%20%20%20%20targets%20%3D%20list(top%5B%22zcta%22%5D)%0A%0A%20%20%20%20%20%20%20%20%23%20Make%20sure%20starting%20ZCTA%20is%20included%0A%20%20%20%20%20%20%20%20if%20START_ZCTA%20not%20in%20targets%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20targets%20%3D%20%5BSTART_ZCTA%5D%20%2B%20targets%0A%0A%20%20%20%20%20%20%20%20print(%22Selected%20ZCTAs%3A%22%2C%20targets)%0A%0A%20%20%20%20%20%20%20%20%23%20Build%20distance%20matrix%0A%20%20%20%20%20%20%20%20print(%22Computing%20pairwise%20travel%20times...%22)%0A%20%20%20%20%20%20%20%20dist_matrix%20%3D%20build_distance_matrix(G%2C%20targets)%0A%0A%20%20%20%20%20%20%20%20%23%20Determine%20start%20index%0A%20%20%20%20%20%20%20%20start_idx%20%3D%20targets.index(START_ZCTA)%0A%0A%20%20%20%20%20%20%20%20print(%22Solving%20TSP...%22)%0A%20%20%20%20%20%20%20%20route_idx%20%3D%20solve_tsp(dist_matrix%2C%20start_idx)%0A%0A%20%20%20%20%20%20%20%20route%20%3D%20%5Btargets%5Bi%5D%20for%20i%20in%20route_idx%5D%0A%0A%20%20%20%20%20%20%20%20%23%20print(%22%5CnOptimal%20Route%3A%22)%0A%20%20%20%20%20%20%20%20%23%20for%20z%20in%20route%3A%0A%20%20%20%20%20%20%20%20%23%20%20%20%20%20print(z)%0A%0A%20%20%20%20%20%20%20%20%23%20Save%20route%20to%20CSV%0A%20%20%20%20%20%20%20%20pd.DataFrame(%7B%22zcta%22%3A%20route%7D).to_csv(%22optimal_route.csv%22%2C%20index%3DFalse)%0A%20%20%20%20%20%20%20%20return%20print(%22%5CnSaved%20optimal_route.csv%22)%0A%0A%20%20%20%20_()%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%20%20%20%20optimal_route%20%3D%20pd.read_csv(%22.%2Foptimal_route.csv%22)%0A%20%20%20%20optimal_route.head(20)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Starting%20in%20SLC%20(84101)%2C%20and%20then%20returning%20to%20SLC%20in%20a%20loop%2C%20this%20is%20the%20optimal%20zip%20code%20visitation%20path.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(folium%2C%20pd)%3A%0A%20%20%20%20%23%20Here%20we%20simply%20display%20that%20optimal%20route%20in%20an%20interactive%20box%0A%20%20%20%20def%20_()%3A%0A%20%20%20%20%20%20%20%20ZCTAS_CSV%20%3D%20%22utah_zctas.csv%22%0A%20%20%20%20%20%20%20%20ROUTE_CSV%20%3D%20%22optimal_route.csv%22%0A%20%20%20%20%20%20%20%20OUTPUT_HTML%20%3D%20%22utah_ldct_route.html%22%0A%0A%20%20%20%20%20%20%20%20%23%20Load%20ZCTA%20centroids%0A%20%20%20%20%20%20%20%20zctas%20%3D%20pd.read_csv(ZCTAS_CSV)%0A%20%20%20%20%20%20%20%20%23%20Normalize%20column%20names%0A%20%20%20%20%20%20%20%20zctas.columns%20%3D%20%5Bc.lower()%20for%20c%20in%20zctas.columns%5D%0A%0A%20%20%20%20%20%20%20%20if%20%22geoid%22%20in%20zctas.columns%20and%20%22zcta%22%20not%20in%20zctas.columns%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20zctas%20%3D%20zctas.rename(columns%3D%7B%22geoid%22%3A%20%22zcta%22%7D)%0A%20%20%20%20%20%20%20%20if%20%22intptlat%22%20in%20zctas.columns%20and%20%22lat%22%20not%20in%20zctas.columns%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20zctas%20%3D%20zctas.rename(columns%3D%7B%22intptlat%22%3A%20%22lat%22%7D)%0A%20%20%20%20%20%20%20%20if%20%22intptlong%22%20in%20zctas.columns%20and%20%22lon%22%20not%20in%20zctas.columns%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20zctas%20%3D%20zctas.rename(columns%3D%7B%22intptlong%22%3A%20%22lon%22%7D)%0A%0A%20%20%20%20%20%20%20%20zctas%5B%22zcta%22%5D%20%3D%20zctas%5B%22zcta%22%5D.astype(str).str.zfill(5)%0A%0A%20%20%20%20%20%20%20%20%23%20Load%20route%20(ordered%20ZCTAs)%0A%20%20%20%20%20%20%20%20route%20%3D%20pd.read_csv(ROUTE_CSV)%0A%20%20%20%20%20%20%20%20route.columns%20%3D%20%5Bc.lower()%20for%20c%20in%20route.columns%5D%0A%20%20%20%20%20%20%20%20route%5B%22zcta%22%5D%20%3D%20route%5B%22zcta%22%5D.astype(str).str.zfill(5)%0A%0A%20%20%20%20%20%20%20%20%23%20Join%20route%20with%20coordinates%0A%20%20%20%20%20%20%20%20route_coords%20%3D%20route.merge(zctas%5B%5B%22zcta%22%2C%20%22lat%22%2C%20%22lon%22%5D%5D%2C%20on%3D%22zcta%22%2C%20how%3D%22left%22)%0A%0A%20%20%20%20%20%20%20%20if%20route_coords%5B%22lat%22%5D.isna().any()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20missing%20%3D%20route_coords%5Broute_coords%5B%22lat%22%5D.isna()%5D%5B%22zcta%22%5D.unique()%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(f%22Missing%20coordinates%20for%20ZCTAs%3A%20%7Bmissing%7D%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Create%20list%20of%20(lat%2C%20lon)%20points%20in%20route%20order%0A%20%20%20%20%20%20%20%20points%20%3D%20list(zip(route_coords%5B%22lat%22%5D%2C%20route_coords%5B%22lon%22%5D))%0A%0A%20%20%20%20%20%20%20%20%23%20Center%20map%20on%20the%20mean%20of%20all%20route%20points%0A%20%20%20%20%20%20%20%20center_lat%20%3D%20route_coords%5B%22lat%22%5D.mean()%0A%20%20%20%20%20%20%20%20center_lon%20%3D%20route_coords%5B%22lon%22%5D.mean()%0A%0A%20%20%20%20%20%20%20%20m%20%3D%20folium.Map(location%3D%5Bcenter_lat%2C%20center_lon%5D%2C%20zoom_start%3D7%2C%20tiles%3D%22OpenStreetMap%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Add%20straight-line%20polyline%20for%20the%20route%0A%20%20%20%20%20%20%20%20folium.PolyLine(%0A%20%20%20%20%20%20%20%20%20%20%20%20locations%3Dpoints%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20weight%3D4%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity%3D0.8%2C%0A%20%20%20%20%20%20%20%20).add_to(m)%0A%0A%20%20%20%20%20%20%20%20%23%20Add%20markers%20for%20each%20stop%0A%20%20%20%20%20%20%20%20for%20_%2C%20row%20in%20route_coords.iterrows()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20folium.CircleMarker(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20location%3D%5Brow%5B%22lat%22%5D%2C%20row%5B%22lon%22%5D%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radius%3D4%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fill%3DTrue%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fill_opacity%3D0.9%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20popup%3Df%22ZCTA%20%7Brow%5B'zcta'%5D%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20).add_to(m)%0A%0A%20%20%20%20%20%20%20%20%23%20Highlight%20the%20start%2Fend%20(Salt%20Lake%20City)%0A%20%20%20%20%20%20%20%20start%20%3D%20route_coords.iloc%5B0%5D%0A%20%20%20%20%20%20%20%20folium.Marker(%0A%20%20%20%20%20%20%20%20%20%20%20%20location%3D%5Bstart%5B%22lat%22%5D%2C%20start%5B%22lon%22%5D%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20popup%3Df%22Start%20(ZCTA%20%7Bstart%5B'zcta'%5D%7D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20icon%3Dfolium.Icon(color%3D%22green%22%2C%20icon%3D%22play%22)%2C%0A%20%20%20%20%20%20%20%20).add_to(m)%0A%0A%20%20%20%20%20%20%20%20end%20%3D%20route_coords.iloc%5B-1%5D%0A%20%20%20%20%20%20%20%20folium.Marker(%0A%20%20%20%20%20%20%20%20%20%20%20%20location%3D%5Bend%5B%22lat%22%5D%2C%20end%5B%22lon%22%5D%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20popup%3Df%22End%20(ZCTA%20%7Bend%5B'zcta'%5D%7D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20icon%3Dfolium.Icon(color%3D%22red%22%2C%20icon%3D%22stop%22)%2C%0A%20%20%20%20%20%20%20%20).add_to(m)%0A%0A%20%20%20%20%20%20%20%20%23%20Save%20to%20HTML%0A%20%20%20%20%20%20%20%20m.save(OUTPUT_HTML)%0A%20%20%20%20%20%20%20%20return%20print(f%22Saved%20map%20to%20%7BOUTPUT_HTML%7D%22)%0A%0A%0A%20%20%20%20_()%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(Path%2C%20mo)%3A%0A%20%20%20%20html%20%3D%20Path(%22utah_ldct_route.html%22).read_text()%0A%20%20%20%20mo.iframe(html%2C%20height%3D%22600px%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20As%20you%20can%20see%20the%20route%20matches%20intutition.%0A%0A%20%20%20%20%23%23%23%20There%20are%20of%20course%20several%20things%20you%20could%20do%20to%20tune%20this%20route%20builder%0A%20%20%20%20%23%23%23%20First%20and%20foremost%2C%20depending%20on%20empircale%20data%20you%20might%20opt%20to%20make%20the%20need_score%20function%20more%20sophisticated%20than%20the%20simple%20product%20of%20population%20and%20distance%0A%20%20%20%20%23%23%23%20On%20the%20whole%20though%20this%20is%20a%20robust%20process%20that%20can%20easily%20be%20adapted%20to%20any%20other%20state%20or%20even%20the%20entire%20US.%20Given%20the%20data%20already%20found%20in%20this%20repo.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20This%20is%20what%20you%20need%20to%20know%20to%20get%20the%20OSM%20data%20and%20the%20local%20OSMR%20server%20running.%0A%0A%20%20%20%20%23%23%20If%20you%20have%20cloned%20the%20repo%20all%20you%20should%20need%20is%20the%20Docker%20Image%20and%20to%20start%20the%20server.%20Otherwise%2C%20you'll%20need%20to%20download%20the%20OSM%20data.%0A%0A%20%20%20%20%23%23%23%20To%20get%20the%20environment%20set-up%2C%20first%20you%20will%20need%20to%20download%20the%20Utah%20OSM%20data%3A%0A%0A%20%20%20%20bash%3A%20curl%20-L%20-o%20utah.osm.pbf%20%22https%3A%2F%2Fdownload.geofabrik.de%2Fnorth-america%2Fus%2Futah-latest.osm.pbf%22%0A%0A%20%20%20%20%23%23%23%20You%20will%20also%20need%20to%20install%20the%20OSRM%20(Open%20Street%20Routing%20Machine)%20docker%20image%3A%0A%0A%20%20%20%20bash%3A%20docker%20pull%20osrm%2Fosrm-backend%0A%0A%20%20%20%20%23%23%23%20Then%20you%20will%20need%20to%20run%20some%20additional%20commands%20to%20get%20the%20OSRM%20server%20up%20and%20running%20locally%3A%0A%0A%20%20%20%201)%20Extract%20for%20car%20profile%0A%20%20%20%20docker%20run%20-t%20-v%20%24(pwd)%3A%2Fdata%20osrm%2Fosrm-backend%20osrm-extract%20-p%20%2Fopt%2Fcar.lua%20%2Fdata%2Futah-latest.osm.pbf%0A%0A%20%20%20%203)%20Contract%20(build%20routing%20graph)%0A%20%20%20%20docker%20run%20-t%20-v%20%24(pwd)%3A%2Fdata%20osrm%2Fosrm-backend%20osrm-contract%20%2Fdata%2Futah-latest.osrm%0A%0A%20%20%20%20%23%23%23%20Finally%2C%20you%20can%20start%20actually%20running%20the%20server%20with%20this%20command%3A%0A%20%20%20%20docker%20run%20--platform%3Dlinux%2Famd64%20-t%20-i%20-p%205001%3A5000%20%5C%0A%20%20%20%20%20%20-v%20%22%24(pwd)%22%3A%2Fdata%20osrm%2Fosrm-backend%20%5C%0A%20%20%20%20%20%20osrm-routed%20--algorithm%3DCH%20%2Fdata%2Futah.osrm%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">42398fa97d2138249c98ccd8938d24b92e3bf0f63c3519ea5a92505cf8bdb4a4</marimo-code-hash>
</body>
</html>
